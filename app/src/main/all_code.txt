===== ./res/anim/fade_out.xml =====
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:interpolator/accelerate_decelerate"
    android:fromAlpha="1.0" android:toAlpha="0.0"
    android:duration="210"/>
===== ./res/anim/fade_in.xml =====
<?xml version="1.0" encoding="utf-8"?>
<alpha xmlns:android="http://schemas.android.com/apk/res/android"
    android:interpolator="@android:interpolator/accelerate_decelerate"
    android:fromAlpha="0.0" android:toAlpha="1.0"
    android:duration="260"/>
===== ./res/drawable/ic_baseline_volume_up_24.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp" android:height="24dp"
    android:viewportWidth="24" android:viewportHeight="24">
    <path
        android:fillColor="#6366F1"
        android:pathData="M3,9v6h4l5,5V4L7,9zm13.5,3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-0.73 2.5-2.26 2.5-4.02zM14,3.23v2.06c3.39,0.49 6,3.39 6,6.71s-2.61,6.22-6,6.71v2.06c4.45-0.52 8-4.28 8-8.77s-3.55-8.25-8-8.77z"/>
</vector>
===== ./res/drawable/ic_arrow_right.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
    <path
        android:fillColor="#FFFFFF"
        android:pathData="M8.59,16.59L13.17,12 8.59,7.41 10,6l6,6 -6,6z"/>
</vector>===== ./res/drawable/ic_arrow_left.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24">
    <path
        android:fillColor="#FFFFFF"
        android:pathData="M15.41,7.41L14,6l-6,6 6,6 1.41,-1.41L10.83,12z"/>
</vector>===== ./res/drawable/bg_circle_primary.xml =====
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval">
    <solid android:color="@color/primary_blue"/>
</shape>===== ./res/drawable/button_outline.xml =====
<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
    android:color="@color/ripple_dark">
    <item>
        <selector>
            <!-- Pressed: 살짝 배경 밝게 + 테두리 진하게 -->
            <item android:state_pressed="true">
                <shape android:shape="rectangle">
                    <corners android:radius="14dp"/>
                    <solid android:color="@color/light_blue_10"/>  <!-- 아주 옅은 배경 -->
                    <stroke
                        android:width="2dp"
                        android:color="@color/primary_blue_pressed"/>
                </shape>
            </item>

            <!-- Default -->
            <item>
                <shape android:shape="rectangle">
                    <corners android:radius="14dp"/>
                    <solid android:color="@android:color/transparent"/>
                    <stroke
                        android:width="2dp"
                        android:color="@color/primary_blue"/>
                </shape>
            </item>
        </selector>
    </item>
</ripple>===== ./res/drawable/ic_arrow_forward.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/black"
        android:pathData="M12,4l-1.41,1.41L16.17,11H4v2h12.17l-5.58,5.59L12,20l8,-8z"/>
</vector>
===== ./res/drawable/chip_background.xml =====
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/light_blue" />
    <corners android:radius="20dp" />
</shape>
===== ./res/drawable/ic_home.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/black"
        android:pathData="M10,20v-6h4v6h5v-8h3L12,3 2,12h3v8z"/>
</vector>
===== ./res/drawable/ic_favorite_filled.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/black"
        android:pathData="m12,21.35l-1.45,-1.32C5.4,15.36 2,12.28 2,8.5 2,5.42 4.42,3 7.5,3c1.74,0 3.41,0.81 4.5,2.09C13.09,3.81 14.76,3 16.5,3 19.58,3 22,5.42 22,8.5c0,3.78 -3.4,6.86 -8.55,11.54L12,21.35z"/>
</vector>
===== ./res/drawable/ic_launcher_foreground.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:aapt="http://schemas.android.com/aapt"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <path android:pathData="M31,63.928c0,0 6.4,-11 12.1,-13.1c7.2,-2.6 26,-1.4 26,-1.4l38.1,38.1L107,108.928l-32,-1L31,63.928z">
        <aapt:attr name="android:fillColor">
            <gradient
                android:endX="85.84757"
                android:endY="92.4963"
                android:startX="42.9492"
                android:startY="49.59793"
                android:type="linear">
                <item
                    android:color="#44000000"
                    android:offset="0.0" />
                <item
                    android:color="#00000000"
                    android:offset="1.0" />
            </gradient>
        </aapt:attr>
    </path>
    <path
        android:fillColor="#FFFFFF"
        android:fillType="nonZero"
        android:pathData="M65.3,45.828l3.8,-6.6c0.2,-0.4 0.1,-0.9 -0.3,-1.1c-0.4,-0.2 -0.9,-0.1 -1.1,0.3l-3.9,6.7c-6.3,-2.8 -13.4,-2.8 -19.7,0l-3.9,-6.7c-0.2,-0.4 -0.7,-0.5 -1.1,-0.3C38.8,38.328 38.7,38.828 38.9,39.228l3.8,6.6C36.2,49.428 31.7,56.028 31,63.928h46C76.3,56.028 71.8,49.428 65.3,45.828zM43.4,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2c-0.3,-0.7 -0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C45.3,56.528 44.5,57.328 43.4,57.328L43.4,57.328zM64.6,57.328c-0.8,0 -1.5,-0.5 -1.8,-1.2s-0.1,-1.5 0.4,-2.1c0.5,-0.5 1.4,-0.7 2.1,-0.4c0.7,0.3 1.2,1 1.2,1.8C66.5,56.528 65.6,57.328 64.6,57.328L64.6,57.328z"
        android:strokeWidth="1"
        android:strokeColor="#00000000" />
</vector>===== ./res/drawable/button_background.xml =====
<?xml version="1.0" encoding="utf-8"?>
<ripple xmlns:android="http://schemas.android.com/apk/res/android"
    android:color="@color/ripple_dark">
    <item>
        <selector>
            <!-- Pressed: 살짝 더 진한 파란색 -->
            <item android:state_pressed="true">
                <shape android:shape="rectangle">
                    <corners android:radius="14dp"/>
                    <solid android:color="@color/primary_blue_pressed"/>
                </shape>
            </item>

            <!-- Default -->
            <item>
                <shape android:shape="rectangle">
                    <corners android:radius="14dp"/>
                    <solid android:color="@color/primary_blue"/>
                </shape>
            </item>
        </selector>
    </item>
</ripple>===== ./res/drawable/ic_arrow_back.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/black"
        android:pathData="M20,11H7.83l5.59,-5.59L12,4l-8,8 8,8 1.41,-1.41L7.83,13H20v-2z"/>
</vector>
===== ./res/drawable/search_background.xml =====
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/white" />
    <corners android:radius="12dp" />
    <stroke android:width="1dp" android:color="@color/light_blue" />
</shape>
===== ./res/drawable/ic_baseline_play_arrow_24.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp" android:height="24dp"
    android:viewportWidth="24" android:viewportHeight="24">
    <path
        android:fillColor="#FFFFFF"
        android:pathData="M8,5.14v14l11-7-11-7z"/>
</vector>
===== ./res/drawable/badge_rect_outline.xml =====
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android">
    <solid android:color="@android:color/transparent"/>
    <stroke android:width="2dp" android:color="@color/primary_blue"/>
    <corners android:radius="6dp"/>
</shape>===== ./res/drawable/ic_star.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp" android:height="24dp" android:viewportWidth="24"
    android:viewportHeight="24">
    <path
        android:fillColor="#FFF176"
        android:pathData="M12,17.27L18.18,21l-1.63,-7.03L22,9.24l-7.19,-0.61L12,2 9.19,8.63 2,9.24l5.45,4.73L5.82,21z"/>
</vector>
===== ./res/drawable/modern_glass_bg.xml =====
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <item>
        <shape android:shape="rectangle">
            <gradient
                android:startColor="#F7FBFF"
                android:endColor="#E8EBFC"
                android:angle="140"/>
        </shape>
    </item>
    <item>
        <shape android:shape="oval">
            <size android:width="700dp" android:height="420dp"/>
            <gradient
                android:type="radial"
                android:gradientRadius="290dp"
                android:startColor="#78C6FF99"
                android:endColor="#FFFFFFFF"/>
        </shape>
        <gravity android:gravity="bottom|end"/>
    </item>
    <item>
        <shape android:shape="oval">
            <size android:width="500dp" android:height="350dp"/>
            <gradient
                android:type="radial"
                android:gradientRadius="190dp"
                android:startColor="#F9C7FE33"
                android:endColor="#FFFFFFFF"/>
        </shape>
        <gravity android:gravity="top|start"/>
    </item>
</layer-list>
===== ./res/drawable/ic_search.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/black"
        android:pathData="M15.5,14h-0.79l-0.28,-0.27C15.41,12.59 16,11.11 16,9.5 16,5.91 13.09,3 9.5,3S3,5.91 3,9.5 5.91,16 9.5,16c1.61,0 3.09,-0.59 4.23,-1.57l0.27,0.28v0.79l5,4.99L20.49,19l-4.99,-5zM9.5,14C7.01,14 5,11.99 5,9.5S7.01,5 9.5,5 14,7.01 14,9.5 11.99,14 9.5,14z"/>
</vector>
===== ./res/drawable/ic_badge_rounded.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp" android:height="24dp"
    android:viewportWidth="24" android:viewportHeight="24">
    <!-- 둥근 사각형 외곽(아이콘 윤곽선) -->
    <path
        android:fillColor="#000000"
        android:pathData="M4,3h16a3,3 0 0 1 3,3v12a3,3 0 0 1 -3,3H4a3,3 0 0 1 -3,-3V6a3,3 0 0 1 3,-3z"/>
    <!-- 내부 배경 (나중에 tint로 전체 색을 바꾸니 여기 흰색 고정) -->
    <path
        android:fillColor="#FFFFFF"
        android:pathData="M6,5h12a2,2 0 0 1 2,2v10a2,2 0 0 1 -2,2H6a2,2 0 0 1 -2,-2V7a2,2 0 0 1 2,-2z"/>
</vector>===== ./res/drawable/ic_chevron_right.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp" android:height="24dp"
    android:viewportWidth="24" android:viewportHeight="24">
    <path
        android:fillColor="#6366F1"
        android:pathData="M8.59,16.59L10,18l6-6-6-6-1.41,1.41L13.17,12z"/>
</vector>
===== ./res/drawable/ic_quiz.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/black"
        android:pathData="M4,6H2v14c0,1.1 0.9,2 2,2h14v-2H4V6z"/>
    <path
        android:fillColor="@android:color/black"
        android:pathData="M20,2H8C6.9,2 6,2.9 6,4v12c0,1.1 0.9,2 2,2h12c1.1,0 2,-0.9 2,-2V4C22,2.9 21.1,2 20,2zM18,7h-3v5.5c0,0.83 -0.67,1.5 -1.5,1.5s-1.5,-0.67 -1.5,-1.5V7H9V5h9V7z"/>
</vector>
===== ./res/drawable/ic_play_arrow.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/black"
        android:pathData="M8,5v14l11,-7z"/>
</vector>
===== ./res/drawable/button_filled.xml =====
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">
    <solid android:color="@color/primary_blue" />
    <corners android:radius="12dp" />
</shape>===== ./res/drawable/ic_levels.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="18dp" android:height="18dp"
    android:viewportWidth="24" android:viewportHeight="24">
    <path
        android:fillColor="#FFFFFFFF"
        android:pathData="M6,12A2,2 0 1,0 6,16A2,2 0 1,0 6,12M12,12A2,2 0 1,0 12,16A2,2 0 1,0 12,12M18,12A2,2 0 1,0 18,16A2,2 0 1,0 18,12" />
</vector>===== ./res/drawable/ic_arrow_drop_down.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="18dp" android:height="18dp"
    android:viewportWidth="24" android:viewportHeight="24">
    <path
        android:fillColor="#FFFFFFFF"
        android:pathData="M7,10l5,5 5,-5z"/>
</vector>
===== ./res/drawable/ic_chevron_left.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp" android:height="24dp"
    android:viewportWidth="24" android:viewportHeight="24">
    <path
        android:fillColor="#6366F1"
        android:pathData="M15.41,7.41L14,6l-6,6 6,6 1.41-1.41L10.83,12z"/>
</vector>
===== ./res/drawable/ic_volume_up.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/black"
        android:pathData="M3,9v6h4l5,5L12,4L7,9L3,9zM16.5,12c0,-1.77 -1.02,-3.29 -2.5,-4.03v8.05c1.48,-0.73 2.5,-2.25 2.5,-4.02zM14,3.23v2.06c2.89,0.86 5,3.54 5,6.71s-2.11,5.85 -5,6.71v2.06c4.01,-0.91 7,-4.49 7,-8.77s-2.99,-7.86 -7,-8.77z"/>
</vector>
===== ./res/drawable/modern_level_bg.xml =====
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- 기본 그라데이션 배경 -->
    <item>
        <shape android:shape="rectangle">
            <gradient
                android:startColor="#F0F4FF"
                android:endColor="#E0E7FF"
                android:angle="135" />
        </shape>
    </item>
    <!-- 오른쪽 아래 연한 브러시 느낌의 타원형 효과 -->
    <item>
        <shape android:shape="oval">
            <size android:width="700dp" android:height="400dp" />
            <gradient
                android:type="radial"
                android:gradientRadius="340dp"
                android:startColor="#C7D2FE"
                android:endColor="#FFFFFFFF"
                />
        </shape>
        <gravity android:gravity="bottom|end"/>
    </item>
</layer-list>
===== ./res/drawable/ic_favorite_outline.xml =====
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="24dp"
    android:height="24dp"
    android:viewportWidth="24"
    android:viewportHeight="24"
    android:tint="?attr/colorOnSurface">
    <path
        android:fillColor="@android:color/transparent"
        android:pathData="m12,21.35l-1.45,-1.32C5.4,15.36 2,12.28 2,8.5 2,5.42 4.42,3 7.5,3c1.74,0 3.41,0.81 4.5,2.09C13.09,3.81 14.76,3 16.5,3 19.58,3 22,5.42 22,8.5c0,3.78 -3.4,6.86 -8.55,11.54L12,21.35z"
        android:strokeColor="@android:color/black"
        android:strokeWidth="2"
        android:strokeLineCap="round"
        android:strokeLineJoin="round"/>
</vector>
===== ./res/drawable/ic_launcher_background.xml =====
<?xml version="1.0" encoding="utf-8"?>
<vector xmlns:android="http://schemas.android.com/apk/res/android"
    android:width="108dp"
    android:height="108dp"
    android:viewportWidth="108"
    android:viewportHeight="108">
    <path
        android:fillColor="#3DDC84"
        android:pathData="M0,0h108v108h-108z" />
    <path
        android:fillColor="#00000000"
        android:pathData="M9,0L9,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,0L19,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M29,0L29,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M39,0L39,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M49,0L49,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M59,0L59,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M69,0L69,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M79,0L79,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M89,0L89,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M99,0L99,108"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,9L108,9"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,19L108,19"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,29L108,29"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,39L108,39"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,49L108,49"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,59L108,59"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,69L108,69"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,79L108,79"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,89L108,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M0,99L108,99"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,29L89,29"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,39L89,39"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,49L89,49"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,59L89,59"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,69L89,69"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M19,79L89,79"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M29,19L29,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M39,19L39,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M49,19L49,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M59,19L59,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M69,19L69,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
    <path
        android:fillColor="#00000000"
        android:pathData="M79,19L79,89"
        android:strokeWidth="0.8"
        android:strokeColor="#33FFFFFF" />
</vector>
===== ./res/layout/item_review_word.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_margin="12dp"
    android:backgroundTint="@color/card_background"
    app:cardCornerRadius="18dp"
    app:cardElevation="2dp">

    <androidx.constraintlayout.widget.ConstraintLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:padding="18dp">

        <!-- 단어 -->
        <TextView
            android:id="@+id/textSpanish"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:text="spanish"
            android:textColor="@color/primary_blue"
            android:textStyle="bold"
            android:textSize="22sp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toStartOf="@+id/buttonFavorite"
            app:layout_constraintTop_toTopOf="parent" />

        <!-- 상단 스피커(단어 발음) -->
        <ImageButton
            android:id="@+id/buttonPronounce"
            android:layout_width="36dp"
            android:layout_height="36dp"
            android:background="?android:attr/selectableItemBackgroundBorderless"
            android:contentDescription="@string/play_pronunciation"
            android:src="@drawable/ic_volume_up"
            app:tint="@color/primary_blue"
            app:layout_constraintEnd_toStartOf="@+id/buttonFavorite"
            app:layout_constraintTop_toTopOf="@id/textSpanish"
            app:layout_constraintBottom_toBottomOf="@id/textSpanish" />

        <!-- 즐겨찾기 -->
        <ImageButton
            android:id="@+id/buttonFavorite"
            android:layout_width="36dp"
            android:layout_height="36dp"
            android:background="?android:attr/selectableItemBackgroundBorderless"
            android:contentDescription="@string/favorite"
            android:src="@drawable/ic_favorite_outline"
            app:tint="@color/accent_red"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="@id/textSpanish"
            app:layout_constraintBottom_toBottomOf="@id/textSpanish" />

        <!-- 발음 표기 -->
        <TextView
            android:id="@+id/textPronunciation"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:text="[발음]"
            android:textColor="@color/text_secondary"
            android:textSize="14sp"
            android:textStyle="italic"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@id/textSpanish" />

        <!-- 뜻(불릿은 어댑터에서 줄바꿈으로 합쳐 넣습니다) -->
        <TextView
            android:id="@+id/textMeaning"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            android:textColor="@color/text_primary"
            android:textSize="16sp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toBottomOf="@id/textPronunciation" />

        <!-- 예문 라벨 -->
        <TextView
            android:id="@+id/textExampleLabel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="14dp"
            android:text="예문"
            android:textColor="@color/primary_blue"
            android:textStyle="bold"
            android:textSize="15sp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintTop_toBottomOf="@id/textMeaning" />

        <!-- 스페인어 예문 + 스피커(오른쪽 끝) -->
        <TextView
            android:id="@+id/textExample"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="8dp"
            android:text="Mi padre trabaja en una oficina."
            android:textColor="@color/text_primary"
            android:textStyle="italic"
            android:textSize="15sp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toStartOf="@+id/buttonSpeakExample"
            app:layout_constraintTop_toBottomOf="@id/textExampleLabel" />

        <ImageButton
            android:id="@+id/buttonSpeakExample"
            android:layout_width="36dp"
            android:layout_height="36dp"
            android:background="?android:attr/selectableItemBackgroundBorderless"
            android:contentDescription="@string/play_pronunciation"
            android:src="@drawable/ic_volume_up"
            app:tint="@android:color/black"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toTopOf="@id/textExample"
            app:layout_constraintBottom_toBottomOf="@id/textExample" />

        <!-- 예문 해석(회색) -->
        <TextView
            android:id="@+id/textExampleTranslation"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="6dp"
            android:text="우리 아버지는 사무실에서 일해."
            android:textColor="@color/text_secondary"
            android:textSize="14sp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toBottomOf="@id/textExample" />

        <!-- 내가 고른 답(틀린 경우만 표시) -->
        <TextView
            android:id="@+id/textChosen"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:textColor="@color/accent_red"
            android:textSize="14sp"
            app:layout_constraintStart_toStartOf="parent"
            app:layout_constraintEnd_toEndOf="parent"
            app:layout_constraintTop_toBottomOf="@id/textExampleTranslation"
            app:layout_constraintBottom_toBottomOf="parent" />

    </androidx.constraintlayout.widget.ConstraintLayout>
</androidx.cardview.widget.CardView>===== ./res/layout/item_review.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginHorizontal="16dp"
    android:layout_marginVertical="10dp"
    android:backgroundTint="@color/card_background"
    app:cardCornerRadius="18dp"
    app:cardElevation="2dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="18dp">

        <!-- 상단: 단어 + 아이콘들 -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:orientation="horizontal">

            <TextView
                android:id="@+id/textSpanish"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="palabra"
                android:textColor="@color/primary_blue"
                android:textSize="22sp"
                android:textStyle="bold" />

            <ImageButton
                android:id="@+id/btnSpeakWord"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:background="?android:attr/selectableItemBackgroundBorderless"
                android:contentDescription="@string/play_pronunciation"
                android:src="@drawable/ic_volume_up"
                app:tint="@color/primary_blue" />

            <ImageButton
                android:id="@+id/btnFavorite"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:background="?android:attr/selectableItemBackgroundBorderless"
                android:contentDescription="@string/favorite"
                android:src="@drawable/ic_favorite_outline"
                app:tint="@color/accent_red" />
        </LinearLayout>

        <TextView
            android:id="@+id/textPronunciation"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="6dp"
            android:text="[발음]"
            android:textColor="@color/text_secondary"
            android:textStyle="italic" />

        <!-- 뜻 (간단 버전: 첫 뜻만 1~2줄) -->
        <LinearLayout
            android:id="@+id/layoutMeanings"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:orientation="vertical"/>

        <!-- 예문 -->
        <TextView
            android:id="@+id/labelExample"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="12dp"
            android:text="Example"
            android:textColor="@color/text_secondary"
            android:textStyle="bold" />

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_marginTop="6dp">

            <TextView
                android:id="@+id/textExample"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentStart="true"
                android:layout_toStartOf="@+id/btnSpeakExample"
                android:text="Ejemplo en español…"
                android:textColor="@color/text_primary"
                android:textStyle="italic" />

            <ImageButton
                android:id="@+id/btnSpeakExample"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:layout_alignParentEnd="true"
                android:background="?android:attr/selectableItemBackgroundBorderless"
                android:contentDescription="@string/play_pronunciation"
                android:src="@drawable/ic_volume_up"
                app:tint="@color/text_primary"/>
        </RelativeLayout>

        <TextView
            android:id="@+id/textExampleKo"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:text="예문 해석"
            android:textColor="@color/text_secondary" />

        <!-- ❌ 정답 줄 제거 / ⭕️ 내가 고른 답만 표시 -->
        <TextView
            android:id="@+id/textChosenAnswer"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="내가 고른 답: …"
            android:textColor="@color/accent_red"
            android:visibility="gone" />

    </LinearLayout>
</androidx.cardview.widget.CardView>===== ./res/layout/item_chapter.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/cardChapter"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginVertical="10dp"
    android:layout_marginHorizontal="8dp"
    android:foreground="?android:attr/selectableItemBackground"
    app:cardCornerRadius="20dp"
    app:cardElevation="2dp"
    android:backgroundTint="@color/card_background">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="22dp">

        <TextView
            android:id="@+id/textChapterTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="챕터 제목"
            android:textColor="@color/primary_blue"
            android:textSize="21sp"
            android:textStyle="bold"
            android:fontFamily="sans-serif-medium"/>

        <TextView
            android:id="@+id/textChapterDescription"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="7dp"
            android:text="설명"
            android:textColor="@color/text_secondary"
            android:textSize="15sp"/>

        <TextView
            android:id="@+id/textWordCount"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="15dp"
            android:background="@drawable/chip_background"
            android:paddingHorizontal="15dp"
            android:paddingVertical="7dp"
            android:text="5 단어"
            android:textColor="@color/primary_blue"
            android:textStyle="bold"
            android:textSize="12sp"/>

    </LinearLayout>
</androidx.cardview.widget.CardView>
===== ./res/layout/activity_favorites.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- 파란 툴바 (main 스타일) -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="즐겨찾기"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.75" />

    <!-- 즐겨찾기 없음 안내 -->
    <TextView
        android:id="@+id/textEmpty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="저장된 단어가 없습니다."
        android:textColor="@color/text_secondary"
        android:textSize="18sp"
        android:gravity="center"
        android:visibility="gone"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- 즐겨찾기 리스트 -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewFavorites"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="16dp"
        android:layout_marginBottom="18dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toTopOf="@id/fabStudy"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- 스터디 모드 플로팅 버튼 -->
    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fabStudy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginEnd="18dp"
        android:layout_marginBottom="22dp"
        android:backgroundTint="@color/primary_blue"
        android:src="@drawable/ic_play_arrow"
        app:tint="@android:color/white"
        android:contentDescription="스터디 모드 시작"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>
===== ./res/layout/activity_chapter_select.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="챕터 선택"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.75" />

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewChapters"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="12dp"
        android:layout_marginBottom="18dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/activity_test_review.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="복습"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewReview"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        android:layout_marginTop="12dp"
        android:layout_marginBottom="16dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/fragment_home.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewChapters"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="12dp"
        android:layout_marginBottom="18dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />
</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/activity_test.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- 툴바: 88dp, 패딩 보정 제거 -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- 타이틀: 메인과 동일 감성(아래로 약간 bias) -->
    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="단어 테스트"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.70"/>

    <!-- 진행도 -->
    <TextView
        android:id="@+id/textProgress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Question 1 / 10"
        android:textColor="@color/text_secondary"
        android:textSize="16sp"
        android:layout_marginTop="18dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- 문제 카드: 진행도 아래 ~ 제출 버튼 위 ‘세로 중앙’ -->
    <androidx.cardview.widget.CardView
        android:id="@+id/cardQuestion"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="20dp"
        android:layout_marginTop="12dp"
        android:layout_marginBottom="12dp"
        android:backgroundTint="@color/card_background"
        app:cardCornerRadius="20dp"
        app:cardElevation="8dp"
        app:layout_constraintTop_toBottomOf="@id/textProgress"
        app:layout_constraintBottom_toTopOf="@id/buttonSubmit"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.42">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="22dp">

            <TextView
                android:id="@+id/textQuestion"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="What does 'sol' mean?"
                android:textColor="@color/text_primary"
                android:textSize="18sp"
                android:textStyle="bold" />

            <RadioGroup
                android:id="@+id/optionsGroup"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dp">

                <RadioButton
                    android:id="@+id/option1"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="옵션 1"
                    android:textSize="16sp"
                    android:textColor="@color/text_primary" />

                <RadioButton
                    android:id="@+id/option2"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="옵션 2"
                    android:textSize="16sp"
                    android:textColor="@color/text_primary" />

                <RadioButton
                    android:id="@+id/option3"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="옵션 3"
                    android:textSize="16sp"
                    android:textColor="@color/text_primary" />

                <RadioButton
                    android:id="@+id/option4"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:text="옵션 4"
                    android:textSize="16sp"
                    android:textColor="@color/text_primary" />
            </RadioGroup>

            <CheckBox
                android:id="@+id/checkUnsure"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="6dp"
                android:text="잘 모르겠어요"
                android:textColor="@color/text_secondary" />
        </LinearLayout>
    </androidx.cardview.widget.CardView>

    <!-- 제출 버튼: 화면 하단에서 50dp 띄움 -->
    <Button
        android:id="@+id/buttonSubmit"
        android:layout_width="0dp"
        android:layout_height="52dp"
        android:layout_marginHorizontal="20dp"
        android:layout_marginTop="18dp"
        android:layout_marginBottom="50dp"
        android:text="Submit"
        android:textColor="@android:color/white"
        android:textStyle="bold"
        android:background="@drawable/button_background"
        app:layout_constraintTop_toBottomOf="@id/cardQuestion"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/item_word.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/cardWord"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginHorizontal="16dp"
    android:layout_marginVertical="8dp"
    android:backgroundTint="@color/card_background"
    app:cardCornerRadius="18dp"
    app:cardElevation="2dp">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="18dp">

        <!-- 상단: 단어 + 발음 + (스피커, 즐겨찾기) -->
        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:gravity="center_vertical"
            android:orientation="horizontal">

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical">

                <TextView
                    android:id="@+id/textSpanish"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="spanish"
                    android:textColor="@color/primary_blue"
                    android:textSize="22sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/textPronunciation"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="2dp"
                    android:text="[발음]"
                    android:textColor="@color/text_secondary"
                    android:textSize="13sp"
                    android:textStyle="italic" />
            </LinearLayout>

            <!-- 스피커 버튼 (검색에서도 보이게 이 ID를 반드시 유지) -->
            <ImageButton
                android:id="@+id/buttonPronounce"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:background="?android:attr/selectableItemBackgroundBorderless"
                android:contentDescription="@string/play_pronunciation"
                android:src="@drawable/ic_volume_up"
                app:tint="@color/primary_blue" />

            <!-- 즐겨찾기 하트 -->
            <ImageButton
                android:id="@+id/buttonFavorite"
                android:layout_width="40dp"
                android:layout_height="40dp"
                android:background="?android:attr/selectableItemBackgroundBorderless"
                android:contentDescription="@string/favorite"
                android:src="@drawable/ic_favorite_outline"
                app:tint="@color/accent_red" />
        </LinearLayout>

        <!-- 한 줄 의미(리스트에서 요약용) -->
        <TextView
            android:id="@+id/textMeaning"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dp"
            android:text="• 의미 한 줄"
            android:textColor="@color/text_primary"
            android:textSize="15sp" />
    </LinearLayout>
</androidx.cardview.widget.CardView>===== ./res/layout/activity_study.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- Toolbar (88dp) -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <!-- 가운데 타이틀 -->
    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Study Mode"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.70" />

    <!-- 진행도 -->
    <TextView
        android:id="@+id/textProgress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="1 / 5"
        android:textColor="@color/text_secondary"
        android:textSize="16sp"
        android:layout_marginTop="14dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <!-- 단어 카드 -->
    <androidx.cardview.widget.CardView
        android:id="@+id/cardWord"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="20dp"
        android:layout_marginTop="10dp"
        android:layout_marginBottom="12dp"
        android:backgroundTint="@color/card_background"
        app:cardCornerRadius="20dp"
        app:cardElevation="2dp"
        app:layout_constraintTop_toBottomOf="@id/textProgress"
        app:layout_constraintBottom_toTopOf="@id/navBottom"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.42">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="28dp">

            <!-- 상단: 단어/발음/버튼 -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical">

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:id="@+id/textSpanish"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Spanish"
                        android:textColor="@color/primary_blue"
                        android:textSize="27sp"
                        android:textStyle="bold"
                        android:fontFamily="sans-serif-black"/>

                    <TextView
                        android:id="@+id/textPronunciation"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="3dp"
                        android:text="[발음]"
                        android:textColor="@color/text_secondary"
                        android:textSize="16sp"
                        android:textStyle="italic"/>
                </LinearLayout>

                <ImageButton
                    android:id="@+id/buttonPronounce"
                    android:layout_width="44dp"
                    android:layout_height="44dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="@string/play_pronunciation"
                    android:src="@drawable/ic_volume_up"
                    app:tint="@color/primary_blue"/>

                <ImageButton
                    android:id="@+id/buttonFavorite"
                    android:layout_width="44dp"
                    android:layout_height="44dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="@string/favorite"
                    android:src="@drawable/ic_favorite_outline"
                    app:tint="@color/accent_red"/>
            </LinearLayout>

            <!-- 뜻 -->
            <LinearLayout
                android:id="@+id/layoutMeaning"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="22dp"
                android:orientation="vertical"
                android:visibility="gone">

                <View
                    android:layout_width="match_parent"
                    android:layout_height="1dp"
                    android:background="@color/light_blue"
                    android:alpha="0.5" />

                <TextView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="12dp"
                    android:text="@string/meaning"
                    android:textColor="@color/primary_blue"
                    android:textSize="16sp"
                    android:textStyle="bold" />

                <TextView
                    android:id="@+id/textMeaning"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="6dp"
                    android:text="뜻"
                    android:textColor="@color/text_primary"
                    android:textSize="16sp"
                    android:lineSpacingExtra="7dp" />
            </LinearLayout>

            <!-- 예문 -->
            <LinearLayout
                android:id="@+id/layoutExample"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="22dp"
                android:orientation="vertical"
                android:visibility="gone">

                <View
                    android:layout_width="match_parent"
                    android:layout_height="1dp"
                    android:background="@color/light_blue"
                    android:alpha="0.5" />

                <!-- 예문 타이틀 + 재생 버튼 -->
                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="12dp"
                    android:orientation="horizontal"
                    android:gravity="center_vertical">

                    <TextView
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="@string/example"
                        android:textColor="@color/primary_blue"
                        android:textSize="16sp"
                        android:textStyle="bold" />

                    <ImageButton
                        android:id="@+id/buttonPronounceExample"
                        android:layout_width="36dp"
                        android:layout_height="36dp"
                        android:background="?android:attr/selectableItemBackgroundBorderless"
                        android:contentDescription="@string/play_pronunciation"
                        android:src="@drawable/ic_volume_up"
                        app:tint="@color/primary_blue"/>
                </LinearLayout>

                <TextView
                    android:id="@+id/textExample"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="6dp"
                    android:text="Example"
                    android:textColor="@color/text_primary"
                    android:textSize="16sp"
                    android:textStyle="italic" />

                <TextView
                    android:id="@+id/textExampleTranslation"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="4dp"
                    android:text="예문 해석"
                    android:textColor="@color/text_secondary"
                    android:textSize="14sp"/>
            </LinearLayout>
        </LinearLayout>
    </androidx.cardview.widget.CardView>

    <!-- 뜻/예문 토글 버튼 -->
    <LinearLayout
        android:id="@+id/rowToggles"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:layout_marginHorizontal="22dp"
        android:layout_marginTop="16dp"
        app:layout_constraintTop_toBottomOf="@id/cardWord"
        app:layout_constraintBottom_toTopOf="@id/navBottom"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent">

        <Button
            android:id="@+id/buttonShowMeaning"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="48dp"
            android:layout_marginEnd="10dp"
            android:background="@drawable/button_outline"
            android:text="뜻 보기"
            android:textColor="@color/primary_blue"
            android:textSize="15sp"
            android:textStyle="bold"/>

        <Button
            android:id="@+id/buttonShowExample"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="48dp"
            android:layout_marginStart="10dp"
            android:background="@drawable/button_outline"
            android:text="예문 보기"
            android:textColor="@color/primary_blue"
            android:textSize="15sp"
            android:textStyle="bold"/>
    </LinearLayout>

    <!-- 하단 내비 버튼 -->
    <LinearLayout
        android:id="@+id/navBottom"
        android:orientation="horizontal"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="22dp"
        android:layout_marginBottom="50dp"
        android:gravity="center"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent">

        <Button
            android:id="@+id/buttonPrevious"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="52dp"
            android:layout_marginEnd="8dp"
            android:background="@drawable/button_background"
            android:text="이전"
            android:textColor="@color/white"
            android:textSize="16sp"
            android:textStyle="bold"/>

        <Button
            android:id="@+id/buttonNext"
            android:layout_width="0dp"
            android:layout_weight="1"
            android:layout_height="52dp"
            android:background="@drawable/button_background"
            android:text="다음"
            android:textColor="@color/white"
            android:textSize="16sp"
            android:textStyle="bold"/>
    </LinearLayout>

</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/fragment_test_select.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/testSelectRoot"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- 카드: 레벨별 테스트 -->
    <androidx.cardview.widget.CardView
        android:id="@+id/cardLevel"
        android:layout_width="0dp"
        android:layout_height="110dp"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"
        android:layout_marginBottom="14dp"
        android:backgroundTint="@color/card_background"
        app:cardCornerRadius="18dp"
        app:cardElevation="2dp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toTopOf="@id/cardChapter"
        app:layout_constraintVertical_chainStyle="packed">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal"
            android:gravity="center_vertical"
            android:paddingStart="18dp"
            android:paddingEnd="12dp"
            android:paddingTop="16dp"
            android:paddingBottom="16dp">

            <!-- 보라 테두리 배지: Lv (L 대문자, v 소문자) -->
            <TextView
                android:id="@+id/badgeLevel"
                android:layout_width="36dp"
                android:layout_height="40dp"
                android:gravity="center"
                android:text="Lv"
                android:textSize="16sp"
                android:textStyle="bold"
                android:includeFontPadding="false"
                android:textColor="@color/primary_blue"
                android:background="@drawable/button_outline" />

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical"
                android:paddingStart="14dp"
                android:paddingEnd="8dp">

                <TextView
                    android:id="@+id/titleLevel"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="레벨별 테스트"
                    android:textColor="@color/primary_blue"
                    android:textStyle="bold"
                    android:textSize="18sp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="4dp"
                    android:text="A1 · A2 · B1 · B2 중 하나를 선택해 해당 레벨 단어만 출제"
                    android:textColor="@color/text_secondary"
                    android:textSize="14sp" />
            </LinearLayout>

            <ImageView
                android:layout_width="20dp"
                android:layout_height="20dp"
                android:src="@drawable/ic_chevron_right"
                app:tint="@color/primary_blue" />
        </LinearLayout>
    </androidx.cardview.widget.CardView>

    <!-- 카드: 챕터별 테스트 -->
    <androidx.cardview.widget.CardView
        android:id="@+id/cardChapter"
        android:layout_width="0dp"
        android:layout_height="110dp"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"
        android:layout_marginBottom="14dp"
        android:backgroundTint="@color/card_background"
        app:cardCornerRadius="18dp"
        app:cardElevation="2dp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toBottomOf="@id/cardLevel"
        app:layout_constraintBottom_toTopOf="@id/cardFavorite">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal"
            android:gravity="center_vertical"
            android:paddingStart="18dp"
            android:paddingEnd="12dp"
            android:paddingTop="16dp"
            android:paddingBottom="16dp">

            <!-- 보라 테두리 배지: Ch -->
            <TextView
                android:id="@+id/badgeChapter"
                android:layout_width="36dp"
                android:layout_height="40dp"
                android:gravity="center"
                android:text="Ch"
                android:textSize="16sp"
                android:textStyle="bold"
                android:includeFontPadding="false"
                android:textColor="@color/primary_blue"
                android:background="@drawable/button_outline" />

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical"
                android:paddingStart="14dp"
                android:paddingEnd="8dp">

                <TextView
                    android:id="@+id/titleChapter"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="챕터별 테스트"
                    android:textColor="@color/primary_blue"
                    android:textStyle="bold"
                    android:textSize="18sp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="4dp"
                    android:text="현재 선택된 레벨에서 챕터 하나를 골라 해당 챕터만 출제"
                    android:textColor="@color/text_secondary"
                    android:textSize="14sp" />
            </LinearLayout>

            <ImageView
                android:layout_width="20dp"
                android:layout_height="20dp"
                android:src="@drawable/ic_chevron_right"
                app:tint="@color/primary_blue" />
        </LinearLayout>
    </androidx.cardview.widget.CardView>

    <!-- 카드: 즐겨찾기 테스트 -->
    <androidx.cardview.widget.CardView
        android:id="@+id/cardFavorite"
        android:layout_width="0dp"
        android:layout_height="110dp"
        android:layout_marginStart="16dp"
        android:layout_marginEnd="16dp"
        android:backgroundTint="@color/card_background"
        app:cardCornerRadius="18dp"
        app:cardElevation="2dp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintTop_toBottomOf="@id/cardChapter"
        app:layout_constraintBottom_toBottomOf="parent">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:orientation="horizontal"
            android:gravity="center_vertical"
            android:paddingStart="18dp"
            android:paddingEnd="12dp"
            android:paddingTop="16dp"
            android:paddingBottom="16dp">

            <ImageView
                android:id="@+id/ivFav"
                android:layout_width="26dp"
                android:layout_height="26dp"
                android:src="@drawable/ic_favorite_filled"
                app:tint="@color/primary_blue" />

            <LinearLayout
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:orientation="vertical"
                android:paddingStart="14dp"
                android:paddingEnd="8dp">

                <TextView
                    android:id="@+id/titleFavorite"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:text="즐겨찾기 테스트"
                    android:textColor="@color/primary_blue"
                    android:textStyle="bold"
                    android:textSize="18sp" />

                <TextView
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="4dp"
                    android:text="내가 하트한 단어만 랜덤 출제 (4개 이상일 때 추천)"
                    android:textColor="@color/text_secondary"
                    android:textSize="14sp" />
            </LinearLayout>

            <ImageView
                android:layout_width="20dp"
                android:layout_height="20dp"
                android:src="@drawable/ic_chevron_right"
                app:tint="@color/primary_blue" />
        </LinearLayout>
    </androidx.cardview.widget.CardView>

</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/item_level.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.cardview.widget.CardView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/cardLevel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_marginVertical="10dp"
    android:layout_marginHorizontal="4dp"
    android:foreground="?android:attr/selectableItemBackground"
    app:cardCornerRadius="18dp"
    app:cardElevation="2dp"
    android:backgroundTint="@color/card_background">

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical"
        android:padding="22dp">

        <TextView
            android:id="@+id/textLevelName"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="DELE A1"
            android:textColor="@color/primary_blue"
            android:textSize="22sp"
            android:textStyle="bold"
            android:fontFamily="sans-serif-medium"/>
        <TextView
            android:id="@+id/textLevelDesc"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="6dp"
            android:text="초급"
            android:textColor="@color/text_secondary"
            android:textSize="15sp"/>
    </LinearLayout>
</androidx.cardview.widget.CardView>
===== ./res/layout/activity_search.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- 상단 파란 툴바(메인과 같게) -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="검색"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.75" />

    <!-- 검색 입력 필드 (여기에 editSearch 아이디 부여) -->
    <com.google.android.material.textfield.TextInputLayout
        android:id="@+id/searchInputLayout"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="24dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        android:layout_marginStart="20dp"
        android:layout_marginEnd="20dp">

        <com.google.android.material.textfield.TextInputEditText
            android:id="@+id/editSearch"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:hint="단어를 입력하세요"
            android:textSize="16sp"
            android:singleLine="true"
            android:imeOptions="actionSearch" />
    </com.google.android.material.textfield.TextInputLayout>

    <!-- 검색 결과 리스트 -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewSearch"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="14dp"
        android:layout_marginBottom="18dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintTop_toBottomOf="@id/searchInputLayout"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>
</androidx.constraintlayout.widget.ConstraintLayout>
===== ./res/layout/activity_level_select.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Spanish Vocab"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.75" />

    <TextView
        android:id="@+id/textLevelDesc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="나에게 맞는 스페인어 DELE 레벨을 골라주세요"
        android:textColor="@color/text_secondary"
        android:textSize="17sp"
        android:layout_marginTop="28dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewLevels"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="18dp"
        android:layout_marginBottom="16dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.0"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@id/textLevelDesc"
        app:layout_constraintVertical_bias="0.0" />
</androidx.constraintlayout.widget.ConstraintLayout>
===== ./res/layout/activity_word_list.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- 툴바: 메인과 동일 컨셉(96dp, title은 비움) -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <!-- 툴바 중앙 타이틀(메인과 동일한 중앙 배치 + 동일 bias) -->
    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="단어 리스트"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.696" />

    <!-- 단어 목록 -->
    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewWords"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="14dp"
        android:layout_marginBottom="18dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <!-- 스터디 모드 FAB (기능 변경 없음) -->
    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fabStudy"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="24dp"
        android:src="@drawable/ic_play_arrow"
        app:tint="@android:color/white"
        app:backgroundTint="@color/primary_blue"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>
</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/activity_review.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- 툴바 88dp -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <!-- 중앙 타이틀 (아래로 약간 bias) -->
    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="복습"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.70"/>

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewReview"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        android:clipToPadding="false"
        android:layout_marginTop="14dp"
        android:layout_marginBottom="18dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>
</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/activity_chapter_list.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>

    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Spanish Vocab"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.75" />

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/chapterRecyclerView"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="14dp"
        android:layout_marginBottom="18dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>
</androidx.constraintlayout.widget.ConstraintLayout>
===== ./res/layout/activity_test_select.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- TestSelect: Toolbar (LevelSelect와 동일) -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- TestSelect: 중앙 타이틀 (LevelSelect와 동일하게 bias 0.75) -->
    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="테스트 방식 선택"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.75"/>
    <!-- Bottom Navigation -->
    <com.google.android.material.bottomnavigation.BottomNavigationView
        android:id="@+id/bottomNavigation"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@color/white"
        app:itemIconTint="@color/primary_blue"
        app:itemTextColor="@color/primary_blue"
        app:menu="@menu/bottom_navigation"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintBottom_toBottomOf="parent" />

    <!-- Center Container -->
    <LinearLayout
        android:id="@+id/contentWrap"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:orientation="vertical"
        android:gravity="center"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toTopOf="@id/bottomNavigation"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent">

        <!-- Card: Level -->
        <androidx.cardview.widget.CardView
            android:id="@+id/cardLevel"
            android:layout_width="match_parent"
            android:layout_height="110dp"
            android:layout_marginBottom="18dp"
            android:backgroundTint="@color/card_background"
            app:cardCornerRadius="18dp"
            app:cardElevation="2dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:paddingStart="18dp"
                android:paddingEnd="12dp"
                android:paddingTop="16dp"
                android:paddingBottom="16dp">

                <TextView
                    android:id="@+id/badgeLevel"
                    android:layout_width="36dp"
                    android:layout_height="40dp"
                    android:gravity="center"
                    android:text="Lv"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:includeFontPadding="false"
                    android:textColor="@color/primary_blue"
                    android:background="@drawable/button_outline" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical"
                    android:paddingStart="14dp"
                    android:paddingEnd="8dp">

                    <TextView
                        android:id="@+id/titleLevel"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="레벨별 테스트"
                        android:textColor="@color/primary_blue"
                        android:textStyle="bold"
                        android:textSize="18sp" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="4dp"
                        android:text="A1 · A2 · B1 · B2 중 하나를 선택해 해당 레벨 단어만 출제"
                        android:textColor="@color/text_secondary"
                        android:textSize="14sp" />
                </LinearLayout>

                <ImageView
                    android:layout_width="20dp"
                    android:layout_height="20dp"
                    android:src="@drawable/ic_chevron_right"
                    app:tint="@color/primary_blue" />
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- Card: Chapter -->
        <androidx.cardview.widget.CardView
            android:id="@+id/cardChapter"
            android:layout_width="match_parent"
            android:layout_height="110dp"
            android:layout_marginBottom="20dp"
            android:backgroundTint="@color/card_background"
            app:cardCornerRadius="18dp"
            app:cardElevation="2dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:paddingStart="18dp"
                android:paddingEnd="12dp"
                android:paddingTop="16dp"
                android:paddingBottom="16dp">

                <TextView
                    android:id="@+id/badgeChapter"
                    android:layout_width="36dp"
                    android:layout_height="40dp"
                    android:gravity="center"
                    android:text="Ch"
                    android:textSize="16sp"
                    android:textStyle="bold"
                    android:includeFontPadding="false"
                    android:textColor="@color/primary_blue"
                    android:background="@drawable/button_outline" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical"
                    android:paddingStart="14dp"
                    android:paddingEnd="8dp">

                    <TextView
                        android:id="@+id/titleChapter"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="챕터별 테스트"
                        android:textColor="@color/primary_blue"
                        android:textStyle="bold"
                        android:textSize="18sp" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="4dp"
                        android:text="현재 선택된 레벨에서 원하는 챕터 하나를 골라 해당 챕터만 출제"
                        android:textColor="@color/text_secondary"
                        android:textSize="14sp" />
                </LinearLayout>

                <ImageView
                    android:layout_width="20dp"
                    android:layout_height="20dp"
                    android:src="@drawable/ic_chevron_right"
                    app:tint="@color/primary_blue" />
            </LinearLayout>
        </androidx.cardview.widget.CardView>

        <!-- Card: Favorite -->
        <androidx.cardview.widget.CardView
            android:id="@+id/cardFavorite"
            android:layout_width="match_parent"
            android:layout_height="110dp"
            android:backgroundTint="@color/card_background"
            app:cardCornerRadius="18dp"
            app:cardElevation="2dp">

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical"
                android:paddingStart="18dp"
                android:paddingEnd="12dp"
                android:paddingTop="16dp"
                android:paddingBottom="16dp">

                <ImageView
                    android:id="@+id/ivFav"
                    android:layout_width="26dp"
                    android:layout_height="26dp"
                    android:src="@drawable/ic_favorite_filled"
                    app:tint="@color/primary_blue" />

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical"
                    android:paddingStart="14dp"
                    android:paddingEnd="8dp">

                    <TextView
                        android:id="@+id/titleFavorite"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="즐겨찾기 테스트"
                        android:textColor="@color/primary_blue"
                        android:textStyle="bold"
                        android:textSize="18sp" />

                    <TextView
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="4dp"
                        android:text="내가 하트한 단어만 랜덤 출제 (4개 이상일 때 추천)"
                        android:textColor="@color/text_secondary"
                        android:textSize="14sp" />
                </LinearLayout>

                <ImageView
                    android:layout_width="20dp"
                    android:layout_height="20dp"
                    android:src="@drawable/ic_chevron_right"
                    app:tint="@color/primary_blue" />
            </LinearLayout>
        </androidx.cardview.widget.CardView>

    </LinearLayout>

</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/activity_main.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:id="@+id/root"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- 파란 툴바: 상태바 패딩은 코드(WindowInsets)에서 적용 -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- 중앙 타이틀 (메인 컨셉 그대로) -->
    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Spanish Vocab"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.696" />

    <!-- 현재 레벨 (홈에서만 보이게 코드에서 제어) -->
    <TextView
        android:id="@+id/textCurrentLevel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginEnd="16dp"
        android:paddingStart="8dp"
        android:paddingEnd="16dp"
        android:text="A1"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.696" />

    <!-- 컨테이너 -->
    <FrameLayout
        android:id="@+id/mainContainer"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:clipToPadding="false"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toTopOf="@id/bottomNavigation"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- 검색 FAB -->
    <com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id="@+id/fabSearch"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginEnd="16dp"
        android:layout_marginBottom="16dp"
        android:src="@drawable/ic_search"
        android:contentDescription="@string/search"
        app:tint="@android:color/white"
        app:backgroundTint="@color/secondary_blue"
        app:layout_constraintBottom_toTopOf="@id/bottomNavigation"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- 하단 바 -->
    <com.google.android.material.bottomnavigation.BottomNavigationView
        android:id="@+id/bottomNavigation"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@color/white"
        app:itemIconTint="@color/primary_blue"
        app:itemTextColor="@color/primary_blue"
        app:menu="@menu/bottom_navigation"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintBottom_toBottomOf="parent" />

</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/activity_word_detail.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <!-- 툴바: 88dp, 메인과 동일 컨셉 -->
    <androidx.appcompat.widget.Toolbar
        android:id="@+id/toolbar"
        android:layout_width="0dp"
        android:layout_height="88dp"
        android:background="@color/primary_blue"
        android:elevation="0dp"
        app:title=""
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <!-- 중앙 타이틀 (살짝 아래 보정) -->
    <TextView
        android:id="@+id/toolbarTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="단어 상세"
        android:textColor="@android:color/white"
        android:textSize="22sp"
        android:textStyle="bold"
        android:fontFamily="sans-serif-medium"
        android:gravity="center"
        app:layout_constraintTop_toTopOf="@id/toolbar"
        app:layout_constraintBottom_toBottomOf="@id/toolbar"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.696" />

    <!-- 하단 내비 버튼: 부모 하단에서 50dp 띄움 -->
    <LinearLayout
        android:id="@+id/navButtons"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:gravity="center"
        android:layout_marginHorizontal="18dp"
        android:layout_marginBottom="50dp"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintBottom_toBottomOf="parent">

        <ImageButton
            android:id="@+id/buttonPrevious"
            android:layout_width="0dp"
            android:layout_height="52dp"
            android:layout_weight="1"
            android:background="@drawable/button_filled"
            android:src="@drawable/ic_chevron_left"
            android:contentDescription="이전"
            app:tint="@android:color/white"/>

        <View
            android:layout_width="16dp"
            android:layout_height="match_parent"/>

        <ImageButton
            android:id="@+id/buttonNext"
            android:layout_width="0dp"
            android:layout_height="52dp"
            android:layout_weight="1"
            android:background="@drawable/button_filled"
            android:src="@drawable/ic_chevron_right"
            android:contentDescription="다음"
            app:tint="@android:color/white"/>
    </LinearLayout>

    <!-- 단어 카드: 툴바 아래 ~ 하단 버튼 위, 중앙쪽 배치 -->
    <androidx.cardview.widget.CardView
        android:id="@+id/cardWord"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginHorizontal="20dp"
        android:layout_marginTop="16dp"
        android:layout_marginBottom="16dp"
        android:backgroundTint="@color/card_background"
        app:cardCornerRadius="20dp"
        app:cardElevation="2dp"
        app:layout_constraintTop_toBottomOf="@id/toolbar"
        app:layout_constraintBottom_toTopOf="@id/navButtons"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintVertical_bias="0.42">

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:padding="28dp">

            <!-- 상단: 단어 / 발음 / 버튼들 -->
            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:orientation="horizontal"
                android:gravity="center_vertical">

                <LinearLayout
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:orientation="vertical">

                    <TextView
                        android:id="@+id/textSpanish"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="Spanish"
                        android:textColor="@color/primary_blue"
                        android:textSize="27sp"
                        android:textStyle="bold"
                        android:fontFamily="sans-serif-black"/>

                    <TextView
                        android:id="@+id/textPronunciation"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:layout_marginTop="3dp"
                        android:text="[발음]"
                        android:textColor="@color/text_secondary"
                        android:textSize="16sp"
                        android:textStyle="italic"/>
                </LinearLayout>

                <!-- 발음 듣기(단어) -->
                <ImageButton
                    android:id="@+id/buttonPronounce"
                    android:layout_width="44dp"
                    android:layout_height="44dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="@string/play_pronunciation"
                    android:src="@drawable/ic_volume_up"
                    app:tint="@color/primary_blue"/>

                <!-- 즐겨찾기 -->
                <ImageButton
                    android:id="@+id/buttonFavorite"
                    android:layout_width="44dp"
                    android:layout_height="44dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="@string/favorite"
                    android:src="@drawable/ic_favorite_outline"
                    app:tint="@color/accent_red"/>
            </LinearLayout>

            <!-- 뜻 -->
            <TextView
                android:id="@+id/textMeaning"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="20dp"
                android:text="뜻"
                android:textColor="@color/text_primary"
                android:textSize="18sp"
                android:lineSpacingExtra="7dp" />

            <!-- 예문(스페인어 + 오른쪽 끝 스피커) -->
            <LinearLayout
                android:id="@+id/rowExample"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginTop="16dp"
                android:gravity="center_vertical"
                android:orientation="horizontal">

                <TextView
                    android:id="@+id/textExample"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_weight="1"
                    android:text="예문(스페인어)"
                    android:textColor="@color/text_primary"
                    android:textSize="15sp"
                    android:textStyle="italic" />

                <ImageButton
                    android:id="@+id/buttonPronounceExample"
                    android:layout_width="40dp"
                    android:layout_height="40dp"
                    android:background="?android:attr/selectableItemBackgroundBorderless"
                    android:contentDescription="@string/play_pronunciation"
                    android:src="@drawable/ic_volume_up"
                    app:tint="@android:color/black"/>
            </LinearLayout>

            <!-- 예문 해석 -->
            <TextView
                android:id="@+id/textExampleTranslation"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="4dp"
                android:text="예문 해석"
                android:textColor="@color/text_secondary"
                android:textSize="14sp"/>
        </LinearLayout>
    </androidx.cardview.widget.CardView>

</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/layout/fragment_favorites.xml =====
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/background_gray">

    <TextView
        android:id="@+id/textEmpty"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="저장된 단어가 없습니다."
        android:textColor="@color/text_secondary"
        android:textSize="18sp"
        android:gravity="center"
        android:visibility="gone"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent" />

    <androidx.recyclerview.widget.RecyclerView
        android:id="@+id/recyclerViewFavorites"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_marginTop="16dp"
        android:layout_marginBottom="18dp"
        android:clipToPadding="false"
        android:paddingStart="16dp"
        android:paddingEnd="16dp"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintEnd_toEndOf="parent"/>
</androidx.constraintlayout.widget.ConstraintLayout>===== ./res/values/colors.xml =====
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="purple_200">#FFBB86FC</color>
    <color name="purple_500">#FF6200EE</color>
    <color name="purple_700">#FF3700B3</color>
    <color name="teal_200">#FF03DAC5</color>
    <color name="teal_700">#FF018786</color>
    <color name="black">#FF000000</color>
    <color name="white">#FFFFFFFF</color>

    <color name="primary_blue">#6366F1</color>
    <color name="light_blue">#E0E7FF</color>
    <color name="dark_blue">#1E1B4B</color>
    <color name="secondary_blue">#818CF8</color>
    <color name="background_gray">#F8FAFC</color>
    <color name="card_background">#FFFFFF</color>
    <color name="text_primary">#1F2937</color>
    <color name="text_secondary">#6B7280</color>
    <color name="accent_green">#10B981</color>
    <color name="accent_red">#EF4444</color>
    <color name="primary_blue_pressed">#3947D4</color>   <!-- 기존 primary_blue보다 살짝 진하게 -->
    <color name="light_blue_10">#1A5B7CFF</color>        <!-- 10% 투명도 밝은 배경 -->
    <color name="ripple_dark">#20000000</color>          <!-- 머티리얼 리플 색 -->
</resources>
===== ./res/values/themes.xml =====
<resources xmlns:tools="http://schemas.android.com/tools">
    <style name="Base.Theme.SpanishVocab" parent="Theme.Material3.DayNight.NoActionBar">
        <item name="colorPrimary">#6366F1</item>
        <item name="colorOnPrimary">#FFFFFF</item>
        <item name="colorPrimaryContainer">#E0E7FF</item>
        <item name="colorOnPrimaryContainer">#1E1B4B</item>
        <item name="colorSecondary">#818CF8</item>
        <item name="colorOnSecondary">#FFFFFF</item>
        <item name="colorError">#EF4444</item>
        <item name="android:windowBackground">#F8FAFC</item>
        <item name="colorSurface">#FFFFFF</item>
        <item name="colorOnSurface">#1F2937</item>
    </style>

    <style name="Theme.SpanishVocab" parent="Base.Theme.SpanishVocab" />

    <!-- Material3 버튼 스타일(고급/라운드) : cornerRadius는 shapeAppearance로! -->
    <style name="LevelButtonStyle" parent="Widget.Material3.Button">
        <item name="backgroundTint">#6366F1</item>
        <item name="android:textColor">#FFFFFF</item>
        <item name="android:textSize">19sp</item>
        <item name="android:fontFamily">sans-serif-medium</item>
        <item name="elevation">7dp</item>
        <item name="android:minHeight">56dp</item>
        <item name="android:gravity">center</item>
        <item name="android:paddingHorizontal">12dp</item>
        <item name="shapeAppearance">@style/LevelButtonShape</item>
    </style>

    <!-- shapeAppearance 스타일 별도 정의 -->
    <style name="LevelButtonShape" parent="ShapeAppearance.Material3.Corner.Full">
        <item name="cornerSize">22dp</item>
    </style>
</resources>
===== ./res/values/strings.xml =====
<resources>
    <string name="app_name">Spanish Vocab</string>
    <string name="home">Home</string>
    <string name="chapters">Chapters</string>
    <string name="favorites">Favorites</string>
    <string name="test">Test</string>
    <string name="search">Search</string>
    <string name="search_words">Search words...</string>
    <string name="favorite">Favorite</string>
    <string name="unfavorite">Unfavorite</string>
    <string name="next_word">Next Word</string>
    <string name="previous_word">Previous Word</string>
    <string name="play_pronunciation">Play Pronunciation</string>
    <string name="start_test">Start Test</string>
    <string name="meaning">Meaning</string>
    <string name="example">Example</string>
    <string name="translation">Translation</string>
    <string name="pronunciation">Pronunciation</string>
    <string name="total_words">Total Words</string>
    <string name="mastered_words">Mastered Words</string>
    <string name="learning_words">Learning Words</string>
</resources>
===== ./res/xml/backup_rules.xml =====
<?xml version="1.0" encoding="utf-8"?><!--
   Sample backup rules file; uncomment and customize as necessary.
   See https://developer.android.com/guide/topics/data/autobackup
   for details.
   Note: This file is ignored for devices older than API 31
   See https://developer.android.com/about/versions/12/backup-restore
-->
<full-backup-content>
    <!--
   <include domain="sharedpref" path="."/>
   <exclude domain="sharedpref" path="device.xml"/>
-->
</full-backup-content>===== ./res/xml/data_extraction_rules.xml =====
<?xml version="1.0" encoding="utf-8"?><!--
   Sample data extraction rules file; uncomment and customize as necessary.
   See https://developer.android.com/about/versions/12/backup-restore#xml-changes
   for details.
-->
<data-extraction-rules>
    <cloud-backup>
        <!-- TODO: Use <include> and <exclude> to control what is backed up.
        <include .../>
        <exclude .../>
        -->
    </cloud-backup>
    <!--
    <device-transfer>
        <include .../>
        <exclude .../>
    </device-transfer>
    -->
</data-extraction-rules>===== ./res/menu/menu_chapter_list.xml =====
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/action_change_level"
        android:title="레벨 다시 선택"
        android:showAsAction="ifRoom"/>
</menu>===== ./res/menu/bottom_navigation.xml =====
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:id="@+id/nav_home"
        android:icon="@drawable/ic_home"
        android:title="@string/home" />

    <item
        android:id="@+id/nav_favorites"
        android:icon="@drawable/ic_favorite_outline"
        android:title="@string/favorites" />

    <item
        android:id="@+id/nav_test"
        android:icon="@drawable/ic_quiz"
        android:title="@string/test" />
</menu>
===== ./res/font/font.xml =====
<?xml version="1.0" encoding="utf-8"?>
<font-family xmlns:android="http://schemas.android.com/apk/res/android">

</font-family>===== ./res/mipmap-anydpi-v26/ic_launcher.xml =====
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background" />
    <foreground android:drawable="@drawable/ic_launcher_foreground" />
    <monochrome android:drawable="@drawable/ic_launcher_foreground" />
</adaptive-icon>===== ./res/mipmap-anydpi-v26/ic_launcher_round.xml =====
<?xml version="1.0" encoding="utf-8"?>
<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
    <background android:drawable="@drawable/ic_launcher_background" />
    <foreground android:drawable="@drawable/ic_launcher_foreground" />
    <monochrome android:drawable="@drawable/ic_launcher_foreground" />
</adaptive-icon>===== ./AndroidManifest.xml =====
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools">

    <application
        android:allowBackup="true"
        android:dataExtractionRules="@xml/data_extraction_rules"
        android:fullBackupContent="@xml/backup_rules"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:roundIcon="@mipmap/ic_launcher_round"
        android:supportsRtl="true"
        android:theme="@style/Theme.SpanishVocab"
        tools:targetApi="31">

        <!-- 메인 액티비티(런처) -->
        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:theme="@style/Theme.SpanishVocab">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <!-- 레벨 선택 액티비티 -->
        <activity
            android:name=".LevelSelectActivity"
            android:exported="false"
            android:theme="@style/Theme.SpanishVocab" />

        <activity
            android:name=".WordListActivity"
            android:exported="false"
            android:theme="@style/Theme.SpanishVocab" />

        <activity
            android:name=".FavoritesActivity"
            android:exported="false"
            android:theme="@style/Theme.SpanishVocab" />
        <activity
            android:name=".TestActivity"
            android:exported="false"
            android:theme="@style/Theme.SpanishVocab" />
        <activity
            android:name=".StudyActivity"
            android:exported="false"
            android:theme="@style/Theme.SpanishVocab" />
        <activity
            android:name=".SearchActivity"
            android:exported="false"
            android:theme="@style/Theme.SpanishVocab" />

        <!-- 🟢 반드시 추가! WordDetailActivity -->
        <activity
            android:name=".WordDetailActivity"
            android:exported="false"
            android:theme="@style/Theme.SpanishVocab" />

        <activity
            android:name=".TestSelectActivity"
            android:exported="false" />

        <activity android:name=".ChapterSelectActivity" android:exported="false"/>

        <activity android:name=".ReviewActivity" />

        <!-- ...필요하면 또 다른 액티비티 추가 -->
    </application>
</manifest>
===== ./java/com/example/spanishvocab/WorldDetailActivity.kt =====
package com.example.spanishvocab

import android.app.Activity
import android.content.Intent
import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.view.MotionEvent
import android.view.View
import android.widget.ImageButton
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import androidx.cardview.widget.CardView
import com.example.spanishvocab.data.VocabData
import com.example.spanishvocab.data.Word
import java.util.Locale

class WordDetailActivity : AppCompatActivity(), TextToSpeech.OnInitListener {

    private lateinit var toolbar: androidx.appcompat.widget.Toolbar
    private lateinit var toolbarTitle: TextView

    private lateinit var wordCard: CardView
    private lateinit var spanishText: TextView
    private lateinit var pronunciationText: TextView
    private lateinit var meaningText: TextView
    private lateinit var exampleText: TextView
    private lateinit var exampleTranslationText: TextView

    private lateinit var favoriteButton: ImageButton
    private lateinit var pronounceButton: ImageButton
    private lateinit var pronExampleButton: ImageButton
    private lateinit var previousButton: ImageButton
    private lateinit var nextButton: ImageButton

    private var tts: TextToSpeech? = null
    private lateinit var currentWord: Word
    private lateinit var wordsList: ArrayList<Word>
    private var currentIndex = 0

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_word_detail)

        // 입력 데이터
        currentWord = intent.getParcelableExtra("word") ?: return finish()
        wordsList = intent.getParcelableArrayListExtra("words") ?: arrayListOf()
        currentIndex = wordsList.indexOf(currentWord).coerceAtLeast(0)

        // 뷰 바인딩
        toolbar = findViewById(R.id.toolbar)
        toolbarTitle = findViewById(R.id.toolbarTitle)

        wordCard = findViewById(R.id.cardWord)
        spanishText = findViewById(R.id.textSpanish)
        pronunciationText = findViewById(R.id.textPronunciation)
        meaningText = findViewById(R.id.textMeaning)
        exampleText = findViewById(R.id.textExample)
        exampleTranslationText = findViewById(R.id.textExampleTranslation)

        favoriteButton = findViewById(R.id.buttonFavorite)
        pronounceButton = findViewById(R.id.buttonPronounce)
        pronExampleButton = findViewById(R.id.buttonPronounceExample)
        previousButton = findViewById(R.id.buttonPrevious)
        nextButton = findViewById(R.id.buttonNext)

        // 툴바(중앙 타이틀 TextView 사용)
        setSupportActionBar(toolbar)
        supportActionBar?.title = null
        toolbarTitle.text = "단어 상세"

        // TTS
        tts = TextToSpeech(this, this)

        // 클릭/눌림효과
        setupClickersWithPressEffect()

        // 최초 표시
        displayWord(wordsList[currentIndex])
    }

    // 눌림(축소-복원) 효과 공통
    private fun View.applyPressEffect() {
        isClickable = true
        isFocusable = true
        setOnTouchListener { v, e ->
            when (e.actionMasked) {
                MotionEvent.ACTION_DOWN -> {
                    v.animate().scaleX(0.98f).scaleY(0.98f).setDuration(70).start()
                    v.alpha = 0.96f
                }
                MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL -> {
                    v.animate().scaleX(1f).scaleY(1f).setDuration(90).start()
                    v.alpha = 1f
                }
            }
            false
        }
    }

    private fun setupClickersWithPressEffect() {
        // 눌림 효과
        pronounceButton.applyPressEffect()
        pronExampleButton.applyPressEffect()
        favoriteButton.applyPressEffect()
        previousButton.applyPressEffect()
        nextButton.applyPressEffect()
        wordCard.applyPressEffect()

        // 클릭 리스너
        pronounceButton.setOnClickListener {
            speak(currentWord.spanish)
        }
        pronExampleButton.setOnClickListener {
            speak(currentWord.example)
        }
        favoriteButton.setOnClickListener {
            toggleFavorite()
        }
        previousButton.setOnClickListener {
            showPreviousWord()
        }
        nextButton.setOnClickListener {
            showNextWord()
        }
    }

    private fun speak(text: String?) {
        val t = text?.trim()
        if (!t.isNullOrEmpty()) {
            tts?.speak(t, TextToSpeech.QUEUE_FLUSH, null, null)
        }
    }

    override fun onInit(status: Int) {
        if (status == TextToSpeech.SUCCESS) {
            tts?.language = Locale("es", "ES")
        }
    }

    private fun displayWord(word: Word) {
        currentWord = word

        spanishText.text = word.spanish
        pronunciationText.text = "[${word.pronunciation}]"
        meaningText.text = word.meanings.joinToString("\n• ", "• ")
        exampleText.text = word.example
        exampleTranslationText.text = word.exampleTranslation

        updateFavoriteButton()
        updateNavigationButtons()
    }

    private fun updateFavoriteButton() {
        val favoriteIcon = if (currentWord.isFavorite) {
            R.drawable.ic_favorite_filled
        } else {
            R.drawable.ic_favorite_outline
        }
        favoriteButton.setImageResource(favoriteIcon)
    }

    private fun updateNavigationButtons() {
        previousButton.isEnabled = currentIndex > 0
        nextButton.isEnabled = currentIndex < wordsList.size - 1
    }

    private fun toggleFavorite() {
        currentWord.isFavorite = !currentWord.isFavorite
        wordsList[currentIndex].isFavorite = currentWord.isFavorite
        // 전역 데이터와 동기화
        VocabData.getChapters().forEach { chapter ->
            chapter.words.find { it.id == currentWord.id }?.isFavorite = currentWord.isFavorite
        }
        updateFavoriteButton()
    }

    private fun showPreviousWord() {
        if (currentIndex > 0) {
            currentIndex--
            displayWord(wordsList[currentIndex])
        }
    }

    private fun showNextWord() {
        if (currentIndex < wordsList.size - 1) {
            currentIndex++
            displayWord(wordsList[currentIndex])
        }
    }

    override fun onBackPressed() {
        val resultIntent = Intent()
        resultIntent.putParcelableArrayListExtra("words", wordsList)
        setResult(Activity.RESULT_OK, resultIntent)
        super.onBackPressed()
    }

    override fun onDestroy() {
        tts?.stop()
        tts?.shutdown()
        super.onDestroy()
    }
}===== ./java/com/example/spanishvocab/LevelSelectActivity.kt =====
package com.example.spanishvocab

import android.content.Context
import android.content.Intent
import android.os.Bundle
import android.view.LayoutInflater
import android.view.ViewGroup
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.data.Level

class LevelSelectActivity : AppCompatActivity() {

    private var forTest: Boolean = false

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_level_select)

        forTest = intent.getBooleanExtra("forTest", false)

        // 툴바 타이틀(중앙 TextView)
        findViewById<TextView>(R.id.toolbarTitle).text =
            if (forTest) "레벨 선택 (테스트)" else "레벨 선택"

        val recycler = findViewById<RecyclerView>(R.id.recyclerViewLevels)
        recycler.layoutManager = LinearLayoutManager(this)
        recycler.adapter = SimpleLevelAdapter(Level.values().toList()) { level ->
            if (forTest) {
                // 테스트 모드: 전역 상태 저장 없이 선택 결과만 반환
                setResult(RESULT_OK, Intent().putExtra("selected_level", level.name))
                finish()
            } else {
                // 일반 모드: 전역 레벨 저장 후 메인으로
                saveLevel(level)
                startActivity(Intent(this, MainActivity::class.java))
                finish()
            }
        }
    }

    private fun saveLevel(level: Level) {
        getSharedPreferences("prefs", Context.MODE_PRIVATE)
            .edit().putString("selected_level", level.name).apply()
    }
}

/** item_level.xml 용 간단 어댑터 */
class SimpleLevelAdapter(
    private val items: List<Level>,
    private val onClick: (Level) -> Unit
) : RecyclerView.Adapter<SimpleLevelVH>() {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): SimpleLevelVH {
        val v = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_level, parent, false)
        return SimpleLevelVH(v)
    }

    override fun onBindViewHolder(holder: SimpleLevelVH, position: Int) {
        holder.bind(items[position], onClick)
    }

    override fun getItemCount(): Int = items.size
}

class SimpleLevelVH(itemView: android.view.View) : RecyclerView.ViewHolder(itemView) {
    private val name = itemView.findViewById<TextView>(R.id.textLevelName)
    private val desc = itemView.findViewById<TextView>(R.id.textLevelDesc)

    fun bind(level: Level, onClick: (Level) -> Unit) {
        name.text = level.displayName // 예: "DELE A1"
        desc.text = when (level.name) {
            "DELE_A1" -> "초급 A1"
            "DELE_A2" -> "초급 A2"
            "DELE_B1" -> "중급 B1"
            "DELE_B2" -> "중급 B2"
            else -> ""
        }
        itemView.setOnClickListener { onClick(level) }
    }
}===== ./java/com/example/spanishvocab/TestSelectActivity.kt =====
package com.example.spanishvocab

import android.content.Context
import android.content.Intent
import android.os.Bundle
import android.widget.TextView
import androidx.activity.result.contract.ActivityResultContracts
import androidx.appcompat.app.AppCompatActivity
import com.example.spanishvocab.data.Level
import com.google.android.material.bottomnavigation.BottomNavigationView

class TestSelectActivity : AppCompatActivity() {

    // 레벨 선택 후 돌아왔을 때, 곧바로 TestActivity(mode=level) 실행하기 위한 플래그
    private var pendingLevelTest = false

    // 챕터 선택 결과 받기 (selected_chapter_id)
    private val chapterPickLauncher = registerForActivityResult(
        ActivityResultContracts.StartActivityForResult()
    ) { result ->
        if (result.resultCode == RESULT_OK) {
            val chapterId = result.data?.getIntExtra("selected_chapter_id", -1) ?: -1
            if (chapterId != -1) {
                startActivity(
                    Intent(this, TestActivity::class.java).apply {
                        putExtra("mode", "chapter")
                        putExtra("chapterId", chapterId)
                    }
                )
            }
        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_test_select)

        // 툴바 타이틀
        findViewById<TextView>(R.id.toolbarTitle).text = "테스트 방식 선택"

        // 카드: 레벨별 테스트
        findViewById<androidx.cardview.widget.CardView>(R.id.cardLevel).setOnClickListener {
            // LevelSelectActivity는 보통 prefs("selected_level")에 저장하고 finish함.
            // 다른 파일 수정 없이 동작하게, 복귀 후 onResume에서 바로 TestActivity를 띄우도록 플래그만 설정.
            pendingLevelTest = true
            startActivity(Intent(this, LevelSelectActivity::class.java))
        }

        // 카드: 챕터별 테스트
        findViewById<androidx.cardview.widget.CardView>(R.id.cardChapter).setOnClickListener {
            // 현재 선택된 레벨의 챕터 목록을 보여주는 화면으로 이동(결과로 chapter id를 돌려받음)
            val i = Intent(this, ChapterSelectActivity::class.java)
            i.putExtra("forTest", true)
            chapterPickLauncher.launch(i)
        }

        // 카드: 즐겨찾기 테스트
        findViewById<androidx.cardview.widget.CardView>(R.id.cardFavorite).setOnClickListener {
            startActivity(
                Intent(this, TestActivity::class.java).apply {
                    putExtra("mode", "favorite") // TestActivity에서 정확히 인식
                }
            )
        }

        // 하단 네비게이션
        val bottomNav = findViewById<BottomNavigationView>(R.id.bottomNavigation)
        bottomNav.selectedItemId = R.id.nav_test
        bottomNav.setOnItemSelectedListener { item ->
            when (item.itemId) {
                R.id.nav_home -> {
                    startActivity(Intent(this, MainActivity::class.java))
                    true
                }
                R.id.nav_favorites -> {
                    startActivity(Intent(this, FavoritesActivity::class.java))
                    true
                }
                R.id.nav_test -> true // 현재 화면
                else -> false
            }
        }
    }

    override fun onResume() {
        super.onResume()
        // 레벨 선택에서 돌아온 경우에만 동작
        if (pendingLevelTest) {
            val displayName = getSelectedLevelDisplayName() // 예: "DELE A1"
            if (displayName != null) {
                startActivity(
                    Intent(this, TestActivity::class.java).apply {
                        putExtra("mode", "level")
                        putExtra("level", displayName) // TestActivity.loadWordsByMode()에서 사용
                    }
                )
            }
            pendingLevelTest = false
        }
    }

    // prefs에서 현재 선택된 레벨의 displayName("DELE A1" 등) 가져오기
    private fun getSelectedLevelDisplayName(): String? {
        val name = getSharedPreferences("prefs", Context.MODE_PRIVATE)
            .getString("selected_level", null) ?: return null
        val level = runCatching { Level.valueOf(name) }.getOrNull() ?: return null
        return level.displayName
    }
}===== ./java/com/example/spanishvocab/FavoritesActivity.kt =====
package com.example.spanishvocab

import android.content.Intent
import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.view.View
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.adapter.WordAdapter
import com.example.spanishvocab.data.VocabData
import com.example.spanishvocab.data.Word
import com.google.android.material.floatingactionbutton.FloatingActionButton
import java.util.Locale

class FavoritesActivity : AppCompatActivity() {

    private lateinit var recyclerView: RecyclerView
    private lateinit var emptyView: TextView
    private lateinit var studyFab: FloatingActionButton
    private lateinit var wordAdapter: WordAdapter
    private var favoriteWords = mutableListOf<Word>()

    // TTS: 즐겨찾기 리스트에서도 발음 재생 지원
    private var tts: TextToSpeech? = null

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_favorites)

        findViewById<TextView>(R.id.toolbarTitle).text = "즐겨찾기"

        recyclerView = findViewById(R.id.recyclerViewFavorites)
        emptyView = findViewById(R.id.textEmpty)
        studyFab = findViewById(R.id.fabStudy)

        // TTS 준비
        tts = TextToSpeech(this) { status ->
            if (status == TextToSpeech.SUCCESS) {
                tts?.language = Locale("es", "ES")
            }
        }

        studyFab.setOnClickListener { startStudyMode() }

        setupRecyclerView()
    }

    override fun onResume() {
        super.onResume()
        loadFavorites()
        wordAdapter.updateWords(favoriteWords)
        updateEmptyView()
    }

    private fun loadFavorites() {
        favoriteWords.clear()
        favoriteWords.addAll(
            VocabData.getChapters().flatMap { it.words }.filter { it.isFavorite }
        )
    }

    private fun setupRecyclerView() {
        wordAdapter = WordAdapter(
            favoriteWords,
            onWordClick = { word -> openWordDetail(word) },
            onFavoriteClick = { word ->
                word.isFavorite = !word.isFavorite
                loadFavorites()
                wordAdapter.updateWords(favoriteWords)
                updateEmptyView()
            },
            onPronounceClick = { word ->
                tts?.speak(word.spanish, TextToSpeech.QUEUE_FLUSH, null, null)
            }
        )
        recyclerView.apply {
            layoutManager = LinearLayoutManager(this@FavoritesActivity)
            adapter = wordAdapter
        }
        updateEmptyView()
    }

    private fun updateEmptyView() {
        if (favoriteWords.isEmpty()) {
            recyclerView.visibility = View.GONE
            emptyView.visibility = View.VISIBLE
            studyFab.hide()
        } else {
            recyclerView.visibility = View.VISIBLE
            emptyView.visibility = View.GONE
            studyFab.show()
        }
    }

    private fun openWordDetail(word: Word) {
        val intent = Intent(this, WordDetailActivity::class.java)
        intent.putExtra("word", word)
        intent.putExtra("words", ArrayList(favoriteWords))
        startActivity(intent)
    }

    private fun startStudyMode() {
        if (favoriteWords.isNotEmpty()) {
            val intent = Intent(this, StudyActivity::class.java)
            intent.putExtra("words", ArrayList(favoriteWords))
            startActivity(intent)
        }
    }

    override fun onDestroy() {
        tts?.stop()
        tts?.shutdown()
        super.onDestroy()
    }
}===== ./java/com/example/spanishvocab/MainActivity.kt =====
package com.example.spanishvocab

import android.content.Context
import android.content.Intent
import android.os.Bundle
import android.view.View
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.ViewCompat
import androidx.core.view.updatePadding
import androidx.fragment.app.Fragment
import com.example.spanishvocab.data.Level
import com.google.android.material.bottomnavigation.BottomNavigationView
import com.google.android.material.floatingactionbutton.FloatingActionButton

class MainActivity : AppCompatActivity() {

    private val TAG_HOME = "home"
    private val TAG_FAV  = "fav"
    private val TAG_TEST = "test"

    private lateinit var toolbarTitle: TextView
    private lateinit var levelText: TextView
    private lateinit var bottomNav: BottomNavigationView
    private lateinit var fab: FloatingActionButton

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)

        // 항상 레이아웃 세팅(뒤에 LevelSelect를 덮어 띄우더라도 Main이 안전하게 준비됨)
        setContentView(R.layout.activity_main)

        // 뷰 참조
        toolbarTitle = findViewById(R.id.toolbarTitle)
        levelText    = findViewById(R.id.textCurrentLevel)
        bottomNav    = findViewById(R.id.bottomNavigation)
        fab          = findViewById(R.id.fabSearch)

        // 툴바 타이틀/레벨
        setToolbarTitle("Spanish Vocab")
        levelText.text = getLevelDisplayName()
        levelText.setOnClickListener {
            startActivity(Intent(this, LevelSelectActivity::class.java))
        }

        // 상태바 인셋 적용
        applyStatusBarInsets()

        // 최초 진입: 홈 프래그먼트
        if (savedInstanceState == null) {
            supportFragmentManager.beginTransaction()
                .add(R.id.mainContainer, HomeFragment(), TAG_HOME)
                .commitNow()
            setFabVisible(true)
            showLevelSelector(true)
        }

        // FAB 검색
        fab.setOnClickListener {
            startActivity(Intent(this, SearchActivity::class.java))
        }

        // 하단 네비 전환
        bottomNav.setOnItemSelectedListener { item ->
            when (item.itemId) {
                R.id.nav_home -> {
                    switchTo(TAG_HOME) { HomeFragment() }
                    setToolbarTitle("Spanish Vocab")
                    setFabVisible(true)
                    showLevelSelector(true)
                    true
                }
                R.id.nav_favorites -> {
                    switchTo(TAG_FAV) { FavoritesFragment() }
                    setToolbarTitle("즐겨찾기")
                    setFabVisible(false)
                    showLevelSelector(false)
                    true
                }
                R.id.nav_test -> {
                    switchTo(TAG_TEST) { TestSelectFragment() }
                    setToolbarTitle("테스트 방식 선택")
                    setFabVisible(false)
                    showLevelSelector(false)
                    true
                }
                else -> false
            }
        }

        // ★ 레벨 미선택 시 선택 화면을 "덮어" 띄우기(메인은 남겨둠 → 복귀 시 홈으로 자연 귀환)
        if (!hasLevel()) {
            startActivity(Intent(this, LevelSelectActivity::class.java))
            // finish() 절대 호출하지 않음
        }
    }

    override fun onResume() {
        super.onResume()
        // 레벨 텍스트 최신화
        levelText.text = getLevelDisplayName()
    }

    // 상태바(노치 포함)만큼 툴바를 내려주기
    private fun applyStatusBarInsets() {
        val toolbar = findViewById<View>(R.id.toolbar)
        val root    = findViewById<View>(R.id.root)

        ViewCompat.setOnApplyWindowInsetsListener(root) { _, insets ->
            val sysBars = insets.getInsets(androidx.core.view.WindowInsetsCompat.Type.statusBars())
            toolbar.updatePadding(top = sysBars.top)
            insets
        }
    }

    // ====== 외부(프래그먼트)에서도 호출 가능 ======
    fun setToolbarTitle(title: String) {
        toolbarTitle.text = title
    }

    fun showLevelSelector(show: Boolean) {
        levelText.visibility = if (show) View.VISIBLE else View.GONE
    }
    // ===========================================

    private fun setFabVisible(visible: Boolean) {
        fab.visibility = if (visible) View.VISIBLE else View.GONE
    }

    private fun switchTo(tag: String, factory: () -> Fragment) {
        val fm = supportFragmentManager
        val current = fm.fragments.firstOrNull { it.isVisible }
        val target = fm.findFragmentByTag(tag) ?: factory()

        fm.beginTransaction().apply {
            if (!target.isAdded) add(R.id.mainContainer, target, tag)
            current?.let { hide(it) }
            show(target)
        }.commit()
    }

    // ===== 레벨 유틸 =====
    private fun getLevel(): Level? {
        val name = getSharedPreferences("prefs", Context.MODE_PRIVATE)
            .getString("selected_level", null)
        return name?.let { Level.valueOf(it) }
    }

    private fun hasLevel(): Boolean {
        return getSharedPreferences("prefs", Context.MODE_PRIVATE)
            .contains("selected_level")
    }

    // "DELE A1" → "A1"
    private fun getLevelDisplayName(): String {
        val level = getLevel()
        return level?.displayName?.replace("DELE ", "") ?: "A1"
    }
}===== ./java/com/example/spanishvocab/WordListActivity.kt =====
package com.example.spanishvocab

import android.content.Intent
import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.widget.TextView
import androidx.activity.result.contract.ActivityResultContracts
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.adapter.WordAdapter
import com.example.spanishvocab.data.Chapter
import com.example.spanishvocab.data.VocabData
import com.example.spanishvocab.data.Word
import com.google.android.material.floatingactionbutton.FloatingActionButton
import java.util.Locale

class WordListActivity : AppCompatActivity() {
    private lateinit var recyclerView: RecyclerView
    private lateinit var wordAdapter: WordAdapter
    private lateinit var fabStudy: FloatingActionButton
    private var words = mutableListOf<Word>()

    private var tts: TextToSpeech? = null

    private val detailLauncher = registerForActivityResult(
        ActivityResultContracts.StartActivityForResult()
    ) { result ->
        if (result.resultCode == RESULT_OK) {
            val changedWords = result.data?.getParcelableArrayListExtra<Word>("words")
            if (changedWords != null && changedWords.isNotEmpty()) {
                words.clear()
                words.addAll(changedWords)
                wordAdapter.updateWords(words)
            }
        }
    }

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_word_list)

        findViewById<TextView>(R.id.toolbarTitle).text = "단어 리스트"

        recyclerView = findViewById(R.id.recyclerViewWords)
        fabStudy = findViewById(R.id.fabStudy)

        // TTS 준비
        tts = TextToSpeech(this) { status ->
            if (status == TextToSpeech.SUCCESS) {
                tts?.language = Locale("es", "ES")
            }
        }

        val chapter = intent.getParcelableExtra<Chapter>("chapter")
        words = if (chapter != null) ArrayList(chapter.words) else mutableListOf()

        wordAdapter = WordAdapter(
            words,
            onWordClick = { word ->
                val intent = Intent(this, WordDetailActivity::class.java)
                intent.putExtra("word", word)
                intent.putExtra("words", ArrayList(words))
                detailLauncher.launch(intent)
            },
            onFavoriteClick = { word ->
                word.isFavorite = !word.isFavorite
                updateFavoriteInVocabData(word)
                wordAdapter.updateWords(words)
            },
            onPronounceClick = { word ->
                tts?.speak(word.spanish, TextToSpeech.QUEUE_FLUSH, null, null)
            }
        )

        recyclerView.apply {
            layoutManager = LinearLayoutManager(this@WordListActivity)
            adapter = wordAdapter
            setHasFixedSize(true)
        }

        fabStudy.setOnClickListener {
            if (words.isNotEmpty()) {
                val intent = Intent(this, StudyActivity::class.java)
                intent.putExtra("words", ArrayList(words))
                startActivity(intent)
            }
        }
        updateFabStudy()
    }

    override fun onResume() {
        super.onResume()
        wordAdapter.updateWords(words)
        updateFabStudy()
    }

    private fun updateFavoriteInVocabData(word: Word) {
        VocabData.getChapters().forEach { chapter ->
            chapter.words.find { it.id == word.id }?.isFavorite = word.isFavorite
        }
    }

    private fun updateFabStudy() {
        if (words.isEmpty()) fabStudy.hide() else fabStudy.show()
    }

    override fun onDestroy() {
        tts?.stop()
        tts?.shutdown()
        super.onDestroy()
    }
}===== ./java/com/example/spanishvocab/adapter/LevelAdapter.kt =====
package com.example.spanishvocab.adapter

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.R
import com.example.spanishvocab.data.Level

class LevelAdapter(
    private val items: List<Level>,
    private val onClick: (Level) -> Unit
) : RecyclerView.Adapter<LevelAdapter.VH>() {

    class VH(view: View) : RecyclerView.ViewHolder(view) {
        val name: TextView = view.findViewById(R.id.textLevelName) // "DELE A1"
        val desc: TextView = view.findViewById(R.id.textLevelDesc) // "초급"
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): VH {
        val v = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_level, parent, false)
        return VH(v)
    }

    override fun onBindViewHolder(holder: VH, position: Int) {
        val level = items[position]
        holder.name.text = level.displayName
        holder.desc.text = when (level) {
            Level.DELE_A1 -> "초급"
            Level.DELE_A2 -> "초중급"
            Level.DELE_B1 -> "중급"
            Level.DELE_B2 -> "고급"
        }

        // 카드에 ripple(클릭 피드백) 주려면 item_level.xml의 CardView에 foreground 이미 설정됨
        holder.itemView.setOnClickListener { onClick(level) }
        holder.itemView.contentDescription = "${holder.name.text}, ${holder.desc.text}"
    }

    override fun getItemCount(): Int = items.size
}===== ./java/com/example/spanishvocab/adapter/ChapterAdapter.kt =====
package com.example.spanishvocab.adapter

import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.TextView
import androidx.cardview.widget.CardView
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.R
import com.example.spanishvocab.data.Chapter

class ChapterAdapter(
    private var chapters: List<Chapter>,
    private val onChapterClick: (Chapter) -> Unit
) : RecyclerView.Adapter<ChapterAdapter.ChapterViewHolder>() {

    class ChapterViewHolder(view: View) : RecyclerView.ViewHolder(view) {
        val cardView: CardView = view.findViewById(R.id.cardChapter)
        val titleText: TextView = view.findViewById(R.id.textChapterTitle)
        val descriptionText: TextView = view.findViewById(R.id.textChapterDescription)
        val wordCountText: TextView = view.findViewById(R.id.textWordCount)
    }

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ChapterViewHolder {
        val view = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_chapter, parent, false)
        return ChapterViewHolder(view)
    }

    override fun onBindViewHolder(holder: ChapterViewHolder, position: Int) {
        val chapter = chapters[position]
        holder.titleText.text = chapter.title
        holder.descriptionText.text = chapter.description
        holder.wordCountText.text = "${chapter.words.size} 단어"
        holder.cardView.setOnClickListener {
            onChapterClick(chapter)
        }
    }

    override fun getItemCount() = chapters.size

    // ★★ 반드시 아래 함수 추가! ★★
    fun updateChapters(newChapters: List<Chapter>) {
        chapters = newChapters
        notifyDataSetChanged()
    }
}
===== ./java/com/example/spanishvocab/adapter/WordAdapter.kt =====
package com.example.spanishvocab.adapter

import android.view.LayoutInflater
import android.view.MotionEvent
import android.view.View
import android.view.ViewGroup
import android.widget.ImageButton
import android.widget.TextView
import androidx.cardview.widget.CardView
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.R
import com.example.spanishvocab.data.Word

class WordAdapter(
    private var words: List<Word>,
    private val onWordClick: (Word) -> Unit,
    private val onFavoriteClick: (Word) -> Unit,
    private val onPronounceClick: (Word) -> Unit
) : RecyclerView.Adapter<WordAdapter.WordVH>() {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): WordVH {
        val v = LayoutInflater.from(parent.context).inflate(R.layout.item_word, parent, false)
        return WordVH(v, onWordClick, onFavoriteClick, onPronounceClick)
    }

    override fun onBindViewHolder(holder: WordVH, position: Int) {
        holder.bind(words[position])
    }

    override fun getItemCount(): Int = words.size

    /** 외부에서 현재 표시 중인 리스트를 필요로 할 때 사용 (SearchActivity 등) */
    fun currentItems(): List<Word> = words

    fun updateWords(newWords: List<Word>) {
        words = newWords
        notifyDataSetChanged()
    }

    class WordVH(
        itemView: View,
        private val onWordClick: (Word) -> Unit,
        private val onFavoriteClick: (Word) -> Unit,
        private val onPronounceClick: (Word) -> Unit
    ) : RecyclerView.ViewHolder(itemView) {

        private val card: CardView? = itemView.findViewById(R.id.cardWord)
        private val textSpanish: TextView? = itemView.findViewById(R.id.textSpanish)
        private val textPron: TextView? = itemView.findViewById(R.id.textPronunciation)
        private val textMeaningOneLine: TextView? = itemView.findViewById(R.id.textMeaning)
        private val btnFavorite: ImageButton? = itemView.findViewById(R.id.buttonFavorite)
        private val btnPronounce: ImageButton? = itemView.findViewById(R.id.buttonPronounce)

        fun bind(word: Word) {
            textSpanish?.text = word.spanish
            textPron?.text = "[${word.pronunciation}]"
            textMeaningOneLine?.text = word.meanings.firstOrNull()?.let { "• $it" } ?: ""

            (card ?: itemView).setOnClickListener { onWordClick(word) }
            applyPressEffect(card ?: itemView)

            btnFavorite?.apply {
                isFocusable = false
                isClickable = true
                setImageResource(
                    if (word.isFavorite) R.drawable.ic_favorite_filled
                    else R.drawable.ic_favorite_outline
                )
                setOnClickListener {
                    onFavoriteClick(word)
                    setImageResource(
                        if (word.isFavorite) R.drawable.ic_favorite_filled
                        else R.drawable.ic_favorite_outline
                    )
                }
                applyPressEffect(this)
            }

            btnPronounce?.apply {
                isFocusable = false
                isClickable = true
                setOnClickListener { onPronounceClick(word) }
                applyPressEffect(this)
            }
        }

        private fun applyPressEffect(v: View) {
            v.setOnTouchListener { view, e ->
                when (e.actionMasked) {
                    MotionEvent.ACTION_DOWN -> {
                        view.animate().scaleX(0.98f).scaleY(0.98f).setDuration(70).start()
                        view.alpha = 0.96f
                    }
                    MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL -> {
                        view.animate().scaleX(1f).scaleY(1f).setDuration(90).start()
                        view.alpha = 1f
                    }
                }
                false
            }
        }
    }
}===== ./java/com/example/spanishvocab/SearchActivity.kt =====
package com.example.spanishvocab

import android.content.Intent
import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.text.Editable
import android.text.TextWatcher
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import com.example.spanishvocab.adapter.WordAdapter
import com.example.spanishvocab.data.VocabData
import com.example.spanishvocab.data.Word
import com.google.android.material.textfield.TextInputEditText
import java.util.Locale

class SearchActivity : AppCompatActivity(), TextToSpeech.OnInitListener {

    private lateinit var wordAdapter: WordAdapter
    private lateinit var allWords: List<Word>
    private var tts: TextToSpeech? = null

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_search)

        findViewById<TextView>(R.id.toolbarTitle).text = "검색"

        // 모든 단어 로드
        allWords = VocabData.getChapters().flatMap { it.words }

        // TTS 준비
        tts = TextToSpeech(this, this)

        // 어댑터: 카드 탭 → 상세, 하트 탭 → 즐겨찾기, 스피커 탭 → 발음 재생
        wordAdapter = WordAdapter(
            words = allWords,
            onWordClick = { word ->
                val current = ArrayList(wordAdapter.currentItems())
                val i = Intent(this, WordDetailActivity::class.java)
                i.putExtra("word", word)
                i.putExtra("words", current)
                startActivity(i)
            },
            onFavoriteClick = { word ->
                word.isFavorite = !word.isFavorite
                // 전역 데이터 동기화
                VocabData.getChapters().forEach { ch ->
                    ch.words.find { it.id == word.id }?.isFavorite = word.isFavorite
                }
                // 현재 목록 새로고침(필터 유지)
                wordAdapter.updateWords(wordAdapter.currentItems())
            },
            onPronounceClick = { word ->
                tts?.speak(word.spanish, TextToSpeech.QUEUE_FLUSH, null, null)
            }
        )

        val recycler = findViewById<androidx.recyclerview.widget.RecyclerView>(R.id.recyclerViewSearch)
        recycler.layoutManager = LinearLayoutManager(this)
        recycler.adapter = wordAdapter

        val editSearch = findViewById<TextInputEditText>(R.id.editSearch)
        editSearch.addTextChangedListener(object : TextWatcher {
            override fun afterTextChanged(s: Editable?) = filterWords(s?.toString())
            override fun beforeTextChanged(s: CharSequence?, start: Int, count: Int, after: Int) {}
            override fun onTextChanged(s: CharSequence?, start: Int, before: Int, count: Int) {}
        })
    }

    override fun onInit(status: Int) {
        if (status == TextToSpeech.SUCCESS) {
            tts?.language = Locale("es", "ES")
        }
    }

    // 🔎 단어/발음/뜻만 검색(예문/해석 제외)
    private fun filterWords(query: String?) {
        val text = query?.trim()?.lowercase() ?: ""
        val filtered = if (text.isEmpty()) {
            allWords
        } else {
            allWords.filter { w ->
                w.spanish.lowercase().contains(text) ||                       // 스페인어 단어
                        (w.pronunciation?.lowercase()?.contains(text) == true) ||     // 발음
                        w.meanings.any { it.lowercase().contains(text) }              // 뜻
            }
        }
        wordAdapter.updateWords(filtered)
    }

    override fun onDestroy() {
        tts?.stop()
        tts?.shutdown()
        super.onDestroy()
    }
}===== ./java/com/example/spanishvocab/TtsAvailabilityHelper.kt =====
package com.example.spanishvocab

import android.app.Activity
import android.content.Context
import android.content.Intent
import androidx.appcompat.app.AlertDialog

object TtsAvailabilityHelper {

    private const val PREFS = "prefs"
    private const val KEY_INFO_SHOWN = "tts_info_shown_once"

    /**
     * 앱 설치 후 최초 실행에 한 번만 보여주는 안내 팝업.
     * TTS 설치 여부는 **감지하지 않습니다.**
     */
    fun showFirstRunInfoIfNeeded(activity: Activity) {
        val sp = activity.getSharedPreferences(PREFS, Context.MODE_PRIVATE)
        val shown = sp.getBoolean(KEY_INFO_SHOWN, false)
        if (shown) return

        // 액티비티가 이미 종료/종료 중이면 팝업 띄우지 않기
        if (activity.isFinishing || activity.isDestroyed) return

        AlertDialog.Builder(activity)
            .setTitle("스페인어 듣기 안내")
            .setMessage(
                "이 앱의 듣기 기능은 기기 TTS(음성 합성)의 스페인어 언어 데이터를 사용합니다.\n\n" +
                        "스페인어 언어팩이 없으면 듣기가 동작하지 않을 수 있으니, 필요 시 설정에서 설치해 주세요."
            )
            .setPositiveButton("설정 열기") { _, _ ->
                // 유저가 원할 때만 TTS/언어 관련 설정으로 이동
                try {
                    // 글자 읽어주기(접근성) 화면
                    val intent = Intent("com.android.settings.TTS_SETTINGS")
                    activity.startActivity(intent)
                } catch (_: Exception) {
                    // 일부 기종에서 액션이 없을 수 있음 → 일반 설정으로라도 진입
                    try {
                        val intent = Intent(android.provider.Settings.ACTION_SETTINGS)
                        activity.startActivity(intent)
                    } catch (_: Exception) { /* 무시 */ }
                }
            }
            .setNegativeButton("닫기", null)
            .show()

        sp.edit().putBoolean(KEY_INFO_SHOWN, true).apply()
    }
}===== ./java/com/example/spanishvocab/StudyActivity.kt =====
package com.example.spanishvocab

import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.view.View
import android.widget.Button
import android.widget.ImageButton
import android.widget.TextView
import android.widget.Toast
import androidx.appcompat.app.AppCompatActivity
import androidx.appcompat.widget.Toolbar
import androidx.cardview.widget.CardView
import androidx.core.content.ContextCompat
import androidx.core.view.WindowCompat
import androidx.core.view.WindowInsetsControllerCompat
import com.example.spanishvocab.data.Word
import java.util.*

class StudyActivity : AppCompatActivity(), TextToSpeech.OnInitListener {

    private lateinit var toolbar: Toolbar
    private lateinit var toolbarTitle: TextView
    private lateinit var progressText: TextView
    private lateinit var wordCard: CardView
    private lateinit var spanishText: TextView
    private lateinit var pronunciationText: TextView
    private lateinit var meaningLayout: View
    private lateinit var meaningText: TextView
    private lateinit var exampleLayout: View
    private lateinit var exampleText: TextView
    private lateinit var exampleTranslationText: TextView
    private lateinit var pronounceButton: ImageButton
    private lateinit var pronounceExampleButton: ImageButton
    private lateinit var favoriteButton: ImageButton
    private lateinit var showMeaningButton: Button
    private lateinit var showExampleButton: Button
    private lateinit var nextButton: Button
    private lateinit var previousButton: Button

    private var tts: TextToSpeech? = null
    private lateinit var wordsList: List<Word>
    private var currentIndex = 0

    override fun onCreate(savedInstanceState: Bundle?) {
        // 상태바 색상(메인과 일관)
        WindowCompat.setDecorFitsSystemWindows(window, true)
        window.statusBarColor = ContextCompat.getColor(this, R.color.primary_blue)
        WindowInsetsControllerCompat(window, window.decorView).isAppearanceLightStatusBars = false

        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_study)

        wordsList = intent.getParcelableArrayListExtra("words") ?: listOf()
        if (wordsList.isEmpty()) {
            Toast.makeText(this, "학습할 단어가 없습니다.", Toast.LENGTH_SHORT).show()
            finish()
            return
        }

        setupViews()
        setupTTS()
        displayWord()
    }

    private fun setupViews() {
        toolbar = findViewById(R.id.toolbar)
        toolbarTitle = findViewById(R.id.toolbarTitle)
        progressText = findViewById(R.id.textProgress)
        wordCard = findViewById(R.id.cardWord)
        spanishText = findViewById(R.id.textSpanish)
        pronunciationText = findViewById(R.id.textPronunciation)
        meaningLayout = findViewById(R.id.layoutMeaning)
        meaningText = findViewById(R.id.textMeaning)
        exampleLayout = findViewById(R.id.layoutExample)
        exampleText = findViewById(R.id.textExample)
        exampleTranslationText = findViewById(R.id.textExampleTranslation)
        pronounceButton = findViewById(R.id.buttonPronounce)
        pronounceExampleButton = findViewById(R.id.buttonPronounceExample)
        favoriteButton = findViewById(R.id.buttonFavorite)
        showMeaningButton = findViewById(R.id.buttonShowMeaning)
        showExampleButton = findViewById(R.id.buttonShowExample)
        nextButton = findViewById(R.id.buttonNext)
        previousButton = findViewById(R.id.buttonPrevious)

        toolbarTitle.text = "Study Mode"

        pronounceButton.setOnClickListener { pronounceWord() }
        pronounceExampleButton.setOnClickListener { pronounceExample() }
        favoriteButton.setOnClickListener { toggleFavorite() }
        showMeaningButton.setOnClickListener { showMeaning() }
        showExampleButton.setOnClickListener { showExample() }
        nextButton.setOnClickListener { nextWord() }
        previousButton.setOnClickListener { previousWord() }
    }

    private fun setupTTS() {
        tts = TextToSpeech(this, this)
    }

    override fun onInit(status: Int) {
        if (status == TextToSpeech.SUCCESS) {
            tts?.language = Locale("es", "ES")
        }
    }

    private fun displayWord() {
        val word = wordsList[currentIndex]

        progressText.text = "${currentIndex + 1} / ${wordsList.size}"
        spanishText.text = word.spanish
        pronunciationText.text = "[${word.pronunciation}]"
        meaningText.text = word.meanings.joinToString("\n• ", "• ")
        exampleText.text = word.example
        exampleTranslationText.text = word.exampleTranslation

        // 초기 상태
        meaningLayout.visibility = View.GONE
        exampleLayout.visibility = View.GONE
        showMeaningButton.visibility = View.VISIBLE
        showExampleButton.visibility = View.VISIBLE

        updateFavoriteButton()
        updateNavButtons()
    }

    private fun updateFavoriteButton() {
        val word = wordsList[currentIndex]
        val icon = if (word.isFavorite) R.drawable.ic_favorite_filled
        else R.drawable.ic_favorite_outline
        favoriteButton.setImageResource(icon)
    }

    private fun updateNavButtons() {
        previousButton.isEnabled = currentIndex > 0
        nextButton.text = if (currentIndex < wordsList.size - 1) "다음" else "완료"
    }

    private fun toggleFavorite() {
        val word = wordsList[currentIndex]
        word.isFavorite = !word.isFavorite
        updateFavoriteButton()
    }

    private fun pronounceWord() {
        val word = wordsList[currentIndex]
        tts?.speak(word.spanish, TextToSpeech.QUEUE_FLUSH, null, null)
    }

    private fun pronounceExample() {
        val word = wordsList[currentIndex]
        if (word.example.isNotBlank()) {
            tts?.speak(word.example, TextToSpeech.QUEUE_FLUSH, null, null)
        }
    }

    private fun showMeaning() {
        meaningLayout.visibility = View.VISIBLE
        showMeaningButton.visibility = View.GONE
    }

    private fun showExample() {
        exampleLayout.visibility = View.VISIBLE
        showExampleButton.visibility = View.GONE
    }

    private fun previousWord() {
        if (currentIndex > 0) {
            currentIndex--
            displayWord()
        }
    }

    private fun nextWord() {
        if (currentIndex < wordsList.size - 1) {
            currentIndex++
            displayWord()
        } else {
            finish()
        }
    }

    override fun onDestroy() {
        tts?.stop()
        tts?.shutdown()
        super.onDestroy()
    }
}===== ./java/com/example/spanishvocab/HomeFragment.kt =====
package com.example.spanishvocab

import android.content.Context
import android.content.Intent
import android.os.Bundle
import android.view.View
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.adapter.ChapterAdapter
import com.example.spanishvocab.data.Level
import com.example.spanishvocab.data.VocabData
import com.example.spanishvocab.data.Chapter

class HomeFragment : Fragment(R.layout.fragment_home) {

    private lateinit var recycler: RecyclerView
    private lateinit var adapter: ChapterAdapter

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        recycler = view.findViewById(R.id.recyclerViewChapters)

        adapter = ChapterAdapter(listOf()) { chapter: Chapter ->
            val intent = Intent(requireContext(), WordListActivity::class.java)
            intent.putExtra("chapter", chapter)
            startActivity(intent)
        }

        recycler.layoutManager = LinearLayoutManager(requireContext())
        recycler.adapter = adapter

        // 최초 데이터 적용
        applyChaptersForSelectedLevel()
    }

    override fun onResume() {
        super.onResume()
        // 돌아올 때도 현재 선택 레벨 기준으로 갱신
        applyChaptersForSelectedLevel()
    }

    private fun applyChaptersForSelectedLevel() {
        val chapters = VocabData.getChapters()
        val selected = getSelectedLevelFromPrefs()
        val filtered = selected?.let { lvl -> chapters.filter { it.level == lvl } } ?: chapters
        adapter.updateChapters(filtered)
    }

    private fun getSelectedLevelFromPrefs(): Level? {
        val prefs = requireContext().getSharedPreferences("prefs", Context.MODE_PRIVATE)
        val name = prefs.getString("selected_level", null)
        return name?.let { Level.valueOf(it) }
    }
}===== ./java/com/example/spanishvocab/data/Level.kt =====
package com.example.spanishvocab.data

enum class Level(val displayName: String) {
    DELE_A1("DELE A1"),
    DELE_A2("DELE A2"),
    DELE_B1("DELE B1"),  // <- 추가!
    DELE_B2("DELE B2")   // <- 추가!
}
===== ./java/com/example/spanishvocab/data/VocabData.kt =====
package com.example.spanishvocab.data

import com.example.spanishvocab.data.vocabdata.a1.*
import com.example.spanishvocab.data.vocabdata.a2.*

object VocabData {
    fun getChapters(): List<Chapter> {
        return listOf(
            Chapter(1, Level.DELE_A1, "인사", "A1: 기본적인 인사 표현", greetingWordsA1),
            Chapter(2, Level.DELE_A1, "가족", "A1: 가족 관계 단어", familyWordsA1),
            Chapter(3, Level.DELE_A1, "음식", "A1: 일상 음식 단어", foodWordsA1),
            Chapter(4, Level.DELE_A1, "시간", "A1: 시간/날짜 관련", timeWordsA1),
            Chapter(5, Level.DELE_A1, "장소", "A1: 주요 장소 단어", placeWordsA1),
            Chapter(6, Level.DELE_A2, "여행", "A2: 여행/교통 단어", travelWordsA2),
            Chapter(7, Level.DELE_A2, "쇼핑", "A2: 쇼핑/구매 단어", shoppingWordsA2),
            Chapter(8, Level.DELE_A2, "건강", "A2: 건강/병원 단어", healthWordsA2),
            Chapter(9, Level.DELE_A2, "학교", "A2: 학교/수업 단어", schoolWordsA2),
            Chapter(10, Level.DELE_A2, "날씨", "A2: 날씨/기후 단어", weatherWordsA2)
        )
    }

    fun getFavoriteWords(): List<Word> {
        return getChapters().flatMap { it.words }.filter { it.isFavorite }
    }
}
===== ./java/com/example/spanishvocab/data/Word.kt =====
package com.example.spanishvocab.data

import android.os.Parcelable
import kotlinx.parcelize.Parcelize

@Parcelize
data class Word(
    val id: Int,
    val spanish: String,
    val pronunciation: String,
    val meanings: List<String>,
    val example: String,
    val exampleTranslation: String,
    val chapterId: Int,
    var isFavorite: Boolean = false,
    var isMastered: Boolean = false
) : Parcelable
===== ./java/com/example/spanishvocab/data/vocabdata/A2/WeatherWordsA2.kt =====
package com.example.spanishvocab.data.vocabdata.a2

import com.example.spanishvocab.data.Word

val weatherWordsA2 = listOf(
    Word(
        id = 46,
        spanish = "lluvia",
        pronunciation = "유비아",
        meanings = listOf("비"),
        example = "Hoy hay mucha lluvia.",
        exampleTranslation = "오늘은 비가 많이 온다.",
        chapterId = 10
    ),
    Word(
        id = 47,
        spanish = "sol",
        pronunciation = "솔",
        meanings = listOf("태양", "해"),
        example = "Hace sol y calor.",
        exampleTranslation = "맑고 덥다.",
        chapterId = 10
    ),
    Word(
        id = 48,
        spanish = "nieve",
        pronunciation = "니에베",
        meanings = listOf("눈(내리는 눈)"),
        example = "Mañana va a nevar.",
        exampleTranslation = "내일 눈이 올 것이다.",
        chapterId = 10
    ),
    Word(
        id = 49,
        spanish = "viento",
        pronunciation = "비엔토",
        meanings = listOf("바람"),
        example = "Hoy hace viento fuerte.",
        exampleTranslation = "오늘 바람이 세게 분다.",
        chapterId = 10
    ),
    Word(
        id = 50,
        spanish = "temperatura",
        pronunciation = "템페라뚜라",
        meanings = listOf("온도"),
        example = "La temperatura es de 20 grados.",
        exampleTranslation = "온도는 20도이다.",
        chapterId = 10
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A2/ShoppingWordsA2.kt =====
package com.example.spanishvocab.data.vocabdata.a2

import com.example.spanishvocab.data.Word

val shoppingWordsA2 = listOf(
    Word(
        id = 31,
        spanish = "precio",
        pronunciation = "프레시오",
        meanings = listOf("가격"),
        example = "¿Cuál es el precio de esto?",
        exampleTranslation = "이거 얼마에요?",
        chapterId = 7
    ),
    Word(
        id = 32,
        spanish = "dinero",
        pronunciation = "디네로",
        meanings = listOf("돈"),
        example = "No tengo mucho dinero.",
        exampleTranslation = "나 돈이 많이 없어.",
        chapterId = 7
    ),
    Word(
        id = 33,
        spanish = "ropa",
        pronunciation = "로빠",
        meanings = listOf("옷"),
        example = "Quiero comprar ropa nueva.",
        exampleTranslation = "새 옷을 사고 싶어요.",
        chapterId = 7
    ),
    Word(
        id = 34,
        spanish = "supermercado",
        pronunciation = "수페르메르까도",
        meanings = listOf("슈퍼마켓"),
        example = "Voy al supermercado los sábados.",
        exampleTranslation = "나는 토요일마다 슈퍼에 가요.",
        chapterId = 7
    ),
    Word(
        id = 35,
        spanish = "cambiar",
        pronunciation = "깜비아르",
        meanings = listOf("바꾸다", "교환하다"),
        example = "¿Puedo cambiar esta camisa?",
        exampleTranslation = "이 셔츠 교환할 수 있을까요?",
        chapterId = 7
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A2/TravelWords.kt =====
package com.example.spanishvocab.data.vocabdata.a2

import com.example.spanishvocab.data.Word

val travelWordsA2 = listOf(
    Word(
        id = 26,
        spanish = "avión",
        pronunciation = "아비온",
        meanings = listOf("비행기"),
        example = "El avión sale a las cinco.",
        exampleTranslation = "비행기는 5시에 출발해요.",
        chapterId = 6
    ),
    Word(
        id = 27,
        spanish = "tren",
        pronunciation = "뜨렌",
        meanings = listOf("기차"),
        example = "Vamos en tren a Madrid.",
        exampleTranslation = "기차로 마드리드에 가.",
        chapterId = 6
    ),
    Word(
        id = 28,
        spanish = "billete",
        pronunciation = "비예떼",
        meanings = listOf("티켓", "표"),
        example = "Compro el billete de ida y vuelta.",
        exampleTranslation = "왕복 티켓을 사요.",
        chapterId = 6
    ),
    Word(
        id = 29,
        spanish = "maleta",
        pronunciation = "말레따",
        meanings = listOf("여행가방"),
        example = "La maleta es pesada.",
        exampleTranslation = "캐리어가 무거워요.",
        chapterId = 6
    ),
    Word(
        id = 30,
        spanish = "hotel",
        pronunciation = "오텔",
        meanings = listOf("호텔"),
        example = "Reservé un hotel céntrico.",
        exampleTranslation = "나는 중심가에 있는 호텔을 예약했어.",
        chapterId = 6
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A2/HealthWordsA2.kt =====
package com.example.spanishvocab.data.vocabdata.a2

import com.example.spanishvocab.data.Word

val healthWordsA2 = listOf(
    Word(
        id = 36,
        spanish = "médico",
        pronunciation = "메디꼬",
        meanings = listOf("의사"),
        example = "Tengo cita con el médico mañana.",
        exampleTranslation = "내일 의사와 예약 있어요.",
        chapterId = 8
    ),
    Word(
        id = 37,
        spanish = "enfermo",
        pronunciation = "엔페르모",
        meanings = listOf("아픈", "병든"),
        example = "Estoy enfermo.",
        exampleTranslation = "나 아파요.",
        chapterId = 8
    ),
    Word(
        id = 38,
        spanish = "hospital",
        pronunciation = "오스삐탈",
        meanings = listOf("병원"),
        example = "Voy al hospital por la mañana.",
        exampleTranslation = "나는 아침에 병원에 가요.",
        chapterId = 8
    ),
    Word(
        id = 39,
        spanish = "receta",
        pronunciation = "레세따",
        meanings = listOf("처방전", "레시피"),
        example = "El médico me dio una receta.",
        exampleTranslation = "의사가 나에게 처방전을 줬어요.",
        chapterId = 8
    ),
    Word(
        id = 40,
        spanish = "medicina",
        pronunciation = "메디시나",
        meanings = listOf("약", "의학"),
        example = "Necesito comprar medicina.",
        exampleTranslation = "약을 사야 해요.",
        chapterId = 8
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A2/SchoolWordsA2.kt =====
package com.example.spanishvocab.data.vocabdata.a2

import com.example.spanishvocab.data.Word

val schoolWordsA2 = listOf(
    Word(
        id = 41,
        spanish = "profesor",
        pronunciation = "프로페소르",
        meanings = listOf("선생님"),
        example = "El profesor es muy amable.",
        exampleTranslation = "선생님이 아주 친절해요.",
        chapterId = 9
    ),
    Word(
        id = 42,
        spanish = "clase",
        pronunciation = "끌라세",
        meanings = listOf("수업", "교실"),
        example = "La clase empieza a las ocho.",
        exampleTranslation = "수업은 8시에 시작해요.",
        chapterId = 9
    ),
    Word(
        id = 43,
        spanish = "libro",
        pronunciation = "리브로",
        meanings = listOf("책"),
        example = "Leo un libro interesante.",
        exampleTranslation = "나는 재미있는 책을 읽어요.",
        chapterId = 9
    ),
    Word(
        id = 44,
        spanish = "examen",
        pronunciation = "엑사멘",
        meanings = listOf("시험"),
        example = "Tengo un examen mañana.",
        exampleTranslation = "내일 시험이 있어요.",
        chapterId = 9
    ),
    Word(
        id = 45,
        spanish = "asignatura",
        pronunciation = "아시냐뚜라",
        meanings = listOf("교과", "과목"),
        example = "Mi asignatura favorita es matemáticas.",
        exampleTranslation = "내가 가장 좋아하는 과목은 수학이에요.",
        chapterId = 9
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A1/GreetingWordsA1.kt =====
package com.example.spanishvocab.data.vocabdata.a1

import com.example.spanishvocab.data.Word

val greetingWordsA1 = listOf(
    Word(
        id = 1,
        spanish = "hola",
        pronunciation = "올라",
        meanings = listOf("안녕", "안녕하세요", "여보세요"),
        example = "¡Hola! ¿Cómo estás?",
        exampleTranslation = "안녕! 어떻게 지내?",
        chapterId = 1
    ),
    Word(
        id = 2,
        spanish = "adiós",
        pronunciation = "아디오스",
        meanings = listOf("안녕히 가세요", "잘 가", "헤어질 때 인사"),
        example = "Adiós, hasta mañana.",
        exampleTranslation = "안녕, 내일 보자.",
        chapterId = 1
    ),
    Word(
        id = 3,
        spanish = "buenos días",
        pronunciation = "부에노스 디아스",
        meanings = listOf("좋은 아침", "안녕하세요"),
        example = "¡Buenos días, señor!",
        exampleTranslation = "좋은 아침입니다, 선생님!",
        chapterId = 1
    ),
    Word(
        id = 4,
        spanish = "buenas noches",
        pronunciation = "부에나스 노체스",
        meanings = listOf("안녕히 주무세요", "좋은 밤"),
        example = "Buenas noches y dulces sueños.",
        exampleTranslation = "안녕히 주무세요, 좋은 꿈 꾸세요.",
        chapterId = 1
    ),
    Word(
        id = 5,
        spanish = "gracias",
        pronunciation = "그라시아스",
        meanings = listOf("고마워", "감사합니다"),
        example = "Muchas gracias por la ayuda.",
        exampleTranslation = "도움 주셔서 정말 감사합니다.",
        chapterId = 1
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A1/TimeWordsA1.kt =====
package com.example.spanishvocab.data.vocabdata.a1

import com.example.spanishvocab.data.Word

val timeWordsA1 = listOf(
    Word(
        id = 16,
        spanish = "mañana",
        pronunciation = "마냐나",
        meanings = listOf("아침", "내일"),
        example = "Nos vemos mañana.",
        exampleTranslation = "내일 봐요.",
        chapterId = 4
    ),
    Word(
        id = 17,
        spanish = "hoy",
        pronunciation = "오이",
        meanings = listOf("오늘"),
        example = "Hoy es lunes.",
        exampleTranslation = "오늘은 월요일이다.",
        chapterId = 4
    ),
    Word(
        id = 18,
        spanish = "noche",
        pronunciation = "노체",
        meanings = listOf("밤"),
        example = "Trabajo de noche.",
        exampleTranslation = "나는 밤에 일한다.",
        chapterId = 4
    ),
    Word(
        id = 19,
        spanish = "tarde",
        pronunciation = "따르데",
        meanings = listOf("오후", "늦게"),
        example = "Llego tarde a casa.",
        exampleTranslation = "나는 집에 늦게 도착해.",
        chapterId = 4
    ),
    Word(
        id = 20,
        spanish = "minuto",
        pronunciation = "미누또",
        meanings = listOf("분"),
        example = "Espérame un minuto.",
        exampleTranslation = "1분만 기다려줘.",
        chapterId = 4
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A1/FamilyWordsA1.kt =====
package com.example.spanishvocab.data.vocabdata.a1

import com.example.spanishvocab.data.Word

val familyWordsA1 = listOf(
    Word(
        id = 6,
        spanish = "madre",
        pronunciation = "마드레",
        meanings = listOf("어머니", "엄마"),
        example = "Mi madre cocina muy bien.",
        exampleTranslation = "우리 엄마는 요리를 아주 잘해.",
        chapterId = 2
    ),
    Word(
        id = 7,
        spanish = "padre",
        pronunciation = "파드레",
        meanings = listOf("아버지", "아빠"),
        example = "Mi padre trabaja en una oficina.",
        exampleTranslation = "우리 아버지는 사무실에서 일해.",
        chapterId = 2
    ),
    Word(
        id = 8,
        spanish = "hermano",
        pronunciation = "에르마노",
        meanings = listOf("형제", "남자 형제"),
        example = "Tengo un hermano mayor.",
        exampleTranslation = "나는 형이 한 명 있어.",
        chapterId = 2
    ),
    Word(
        id = 9,
        spanish = "hermana",
        pronunciation = "에르마나",
        meanings = listOf("자매", "여자 형제"),
        example = "Mi hermana estudia medicina.",
        exampleTranslation = "내 누나는 의학을 공부해.",
        chapterId = 2
    ),
    Word(
        id = 10,
        spanish = "familia",
        pronunciation = "파밀리아",
        meanings = listOf("가족", "가정"),
        example = "Mi familia es muy grande.",
        exampleTranslation = "우리 가족은 매우 커.",
        chapterId = 2
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A1/PlaceWordsA1.kt =====
package com.example.spanishvocab.data.vocabdata.a1

import com.example.spanishvocab.data.Word

val placeWordsA1 = listOf(
    Word(
        id = 21,
        spanish = "escuela",
        pronunciation = "에스꾸엘라",
        meanings = listOf("학교"),
        example = "Voy a la escuela todos los días.",
        exampleTranslation = "나는 매일 학교에 간다.",
        chapterId = 5
    ),
    Word(
        id = 22,
        spanish = "casa",
        pronunciation = "까사",
        meanings = listOf("집"),
        example = "Mi casa es pequeña.",
        exampleTranslation = "내 집은 작다.",
        chapterId = 5
    ),
    Word(
        id = 23,
        spanish = "supermercado",
        pronunciation = "수페르메르까도",
        meanings = listOf("슈퍼마켓"),
        example = "Compro pan en el supermercado.",
        exampleTranslation = "나는 슈퍼에서 빵을 산다.",
        chapterId = 5
    ),
    Word(
        id = 24,
        spanish = "trabajo",
        pronunciation = "뜨라바호",
        meanings = listOf("직장", "일"),
        example = "Tengo mucho trabajo.",
        exampleTranslation = "나는 일이 많다.",
        chapterId = 5
    ),
    Word(
        id = 25,
        spanish = "restaurante",
        pronunciation = "레스따우란떼",
        meanings = listOf("식당"),
        example = "Comemos en el restaurante.",
        exampleTranslation = "우리는 식당에서 먹는다.",
        chapterId = 5
    )
)
===== ./java/com/example/spanishvocab/data/vocabdata/A1/FoodWordsA1.kt =====
package com.example.spanishvocab.data.vocabdata.a1

import com.example.spanishvocab.data.Word

val foodWordsA1 = listOf(
    Word(
        id = 11,
        spanish = "pan",
        pronunciation = "판",
        meanings = listOf("빵"),
        example = "Compro pan fresco todos los días.",
        exampleTranslation = "나는 매일 갓 구운 빵을 사.",
        chapterId = 3
    ),
    Word(
        id = 12,
        spanish = "agua",
        pronunciation = "아과",
        meanings = listOf("물"),
        example = "Quiero un vaso de agua.",
        exampleTranslation = "물 한 잔 주세요.",
        chapterId = 3
    ),
    Word(
        id = 13,
        spanish = "leche",
        pronunciation = "레체",
        meanings = listOf("우유"),
        example = "Los niños necesitan beber leche.",
        exampleTranslation = "아이들은 우유를 마셔야 해.",
        chapterId = 3
    ),
    Word(
        id = 14,
        spanish = "fruta",
        pronunciation = "프루타",
        meanings = listOf("과일"),
        example = "Las frutas son muy saludables.",
        exampleTranslation = "과일은 매우 건강에 좋다.",
        chapterId = 3
    ),
    Word(
        id = 15,
        spanish = "café",
        pronunciation = "까페",
        meanings = listOf("커피"),
        example = "Me gusta tomar café por la mañana.",
        exampleTranslation = "나는 아침에 커피 마시는 걸 좋아해.",
        chapterId = 3
    )
)
===== ./java/com/example/spanishvocab/data/Chapter.kt =====
package com.example.spanishvocab.data

import android.os.Parcelable
import kotlinx.parcelize.Parcelize

@Parcelize
data class Chapter(
    val id: Int,
    val level: Level,   // 이 필드 추가
    val title: String,
    val description: String,
    val words: List<Word>
) : Parcelable
===== ./java/com/example/spanishvocab/ReviewActivity.kt =====
package com.example.spanishvocab

import android.content.Context
import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.view.LayoutInflater
import android.view.View
import android.view.ViewGroup
import android.widget.ImageButton
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.data.VocabData
import com.example.spanishvocab.data.Word
import java.util.Locale

class ReviewActivity : AppCompatActivity(), TextToSpeech.OnInitListener {

    companion object {
        // 기존 호출과의 호환을 위해 2가지 start 제공
        fun start(context: Context, title: String, words: ArrayList<Word>) {
            val i = android.content.Intent(context, ReviewActivity::class.java)
            i.putExtra("title", title)
            i.putParcelableArrayListExtra("words", words)
            // 선택·오답 정보가 없는 호출도 허용
            context.startActivity(i)
        }

        fun start(
            context: Context,
            title: String,
            words: ArrayList<Word>,
            chosenMap: HashMap<Int, String>,
            incorrectIds: HashSet<Int>
        ) {
            val i = android.content.Intent(context, ReviewActivity::class.java)
            i.putExtra("title", title)
            i.putParcelableArrayListExtra("words", words)
            i.putExtra("chosen", chosenMap)
            i.putExtra("incorrect", incorrectIds)
            context.startActivity(i)
        }
    }

    private var tts: TextToSpeech? = null
    private lateinit var recycler: RecyclerView
    private lateinit var adapter: ReviewAdapter
    private var items: List<Word> = emptyList()

    // 부가 데이터(없을 수도 있음)
    private var chosenMap: HashMap<Int, String> = hashMapOf()
    private var incorrectSet: HashSet<Int> = hashSetOf()

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_review)

        findViewById<TextView>(R.id.toolbarTitle).text =
            intent.getStringExtra("title") ?: "복습"

        items = intent.getParcelableArrayListExtra<Word>("words") ?: arrayListOf()
        @Suppress("UNCHECKED_CAST")
        chosenMap = intent.getSerializableExtra("chosen") as? HashMap<Int, String> ?: hashMapOf()
        @Suppress("UNCHECKED_CAST")
        incorrectSet = intent.getSerializableExtra("incorrect") as? HashSet<Int> ?: hashSetOf()

        recycler = findViewById(R.id.recyclerViewReview)
        recycler.layoutManager = LinearLayoutManager(this)
        adapter = ReviewAdapter(
            items,
            onPronounceWord = { word ->
                tts?.speak(word.spanish, TextToSpeech.QUEUE_FLUSH, null, null)
            },
            onPronounceExample = { word ->
                if (word.example.isNotBlank()) {
                    tts?.speak(word.example, TextToSpeech.QUEUE_FLUSH, null, null)
                }
            },
            onToggleFavorite = { word ->
                word.isFavorite = !word.isFavorite
                // 전역 데이터 동기화
                VocabData.getChapters().forEach { ch ->
                    ch.words.find { it.id == word.id }?.isFavorite = word.isFavorite
                }
                adapter.notifyItemChanged(items.indexOf(word))
            },
            chosenMap = chosenMap,
            incorrectSet = incorrectSet
        )
        recycler.adapter = adapter

        tts = TextToSpeech(this, this)
    }

    override fun onInit(status: Int) {
        if (status == TextToSpeech.SUCCESS) {
            tts?.language = Locale("es", "ES")
        }
    }

    override fun onDestroy() {
        tts?.stop()
        tts?.shutdown()
        super.onDestroy()
    }
}

/* ---------- Adapter / ViewHolder ---------- */

private class ReviewAdapter(
    private val data: List<Word>,
    private val onPronounceWord: (Word) -> Unit,
    private val onPronounceExample: (Word) -> Unit,
    private val onToggleFavorite: (Word) -> Unit,
    private val chosenMap: Map<Int, String>,
    private val incorrectSet: Set<Int>
) : RecyclerView.Adapter<ReviewVH>() {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ReviewVH {
        val v = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_review_word, parent, false)
        return ReviewVH(v, onPronounceWord, onPronounceExample, onToggleFavorite)
    }

    override fun onBindViewHolder(holder: ReviewVH, position: Int) {
        val w = data[position]
        val chosen = chosenMap[w.id]
        val isIncorrect = incorrectSet.contains(w.id)
        holder.bind(w, chosen, isIncorrect)
    }

    override fun getItemCount(): Int = data.size
}

private class ReviewVH(
    itemView: View,
    private val onPronounceWord: (Word) -> Unit,
    private val onPronounceExample: (Word) -> Unit,
    private val onToggleFavorite: (Word) -> Unit
) : RecyclerView.ViewHolder(itemView) {

    private val textSpanish = itemView.findViewById<TextView>(R.id.textSpanish)
    private val textPronunciation = itemView.findViewById<TextView>(R.id.textPronunciation)
    private val textMeaning = itemView.findViewById<TextView>(R.id.textMeaning)
    private val textExampleLabel = itemView.findViewById<TextView>(R.id.textExampleLabel)
    private val textExample = itemView.findViewById<TextView>(R.id.textExample)
    private val textExampleTranslation = itemView.findViewById<TextView>(R.id.textExampleTranslation)
    private val textChosen = itemView.findViewById<TextView>(R.id.textChosen)

    private val btnSpeakWord = itemView.findViewById<ImageButton>(R.id.buttonPronounce)
    private val btnSpeakExample = itemView.findViewById<ImageButton>(R.id.buttonSpeakExample)
    private val btnFavorite = itemView.findViewById<ImageButton>(R.id.buttonFavorite)

    fun bind(word: Word, chosenText: String?, isIncorrect: Boolean) {
        textSpanish.text = word.spanish
        textPronunciation.text = "[${word.pronunciation}]"

        // 뜻을 • 불릿으로 합치기
        textMeaning.text = word.meanings.joinToString("\n") { "• $it" }

        // 예문 라벨은 고정("예문")
        textExampleLabel.text = "예문"
        textExample.text = word.example
        textExampleTranslation.text = word.exampleTranslation

        // 내가 고른 답: 틀린 경우만 표시
        if (isIncorrect && !chosenText.isNullOrBlank()) {
            textChosen.visibility = View.VISIBLE
            textChosen.text = "내가 고른 답: $chosenText"
        } else {
            textChosen.visibility = View.GONE
        }

        // 즐겨찾기 아이콘
        btnFavorite.setImageResource(
            if (word.isFavorite) R.drawable.ic_favorite_filled
            else R.drawable.ic_favorite_outline
        )

        // 클릭
        btnSpeakWord.setOnClickListener { onPronounceWord(word) }
        btnSpeakExample.setOnClickListener { onPronounceExample(word) }
        btnFavorite.setOnClickListener {
            onToggleFavorite(word)
        }
    }
}===== ./java/com/example/spanishvocab/FavoritesFragment.kt =====
package com.example.spanishvocab

import android.content.Intent
import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.view.View
import android.widget.TextView
import androidx.fragment.app.Fragment
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.adapter.WordAdapter
import com.example.spanishvocab.data.VocabData
import com.example.spanishvocab.data.Word
import java.util.Locale

class FavoritesFragment : Fragment(R.layout.fragment_favorites) {

    private lateinit var emptyText: TextView
    private lateinit var recycler: RecyclerView
    private lateinit var adapter: WordAdapter
    private val words = mutableListOf<Word>()

    private var tts: TextToSpeech? = null

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        emptyText = view.findViewById(R.id.textEmpty)
        recycler = view.findViewById(R.id.recyclerViewFavorites)

        // TTS 준비
        tts = TextToSpeech(requireContext()) { status ->
            if (status == TextToSpeech.SUCCESS) {
                tts?.language = Locale("es", "ES")
            }
        }

        adapter = WordAdapter(
            words,
            onWordClick = { word ->
                val it = Intent(requireContext(), WordDetailActivity::class.java).apply {
                    putExtra("word", word)
                    putParcelableArrayListExtra("words", ArrayList(words))
                }
                startActivity(it)
            },
            onFavoriteClick = { word ->
                word.isFavorite = !word.isFavorite
                updateGlobalFavorite(word)
                refreshData()
            },
            onPronounceClick = { word ->
                tts?.speak(word.spanish, TextToSpeech.QUEUE_FLUSH, null, null)
            }
        )

        recycler.layoutManager = LinearLayoutManager(requireContext())
        recycler.adapter = adapter

        refreshData()
    }

    override fun onResume() {
        super.onResume()
        refreshData()
    }

    private fun refreshData() {
        words.clear()
        words.addAll(VocabData.getFavoriteWords())
        adapter.updateWords(words)
        emptyText.visibility = if (words.isEmpty()) View.VISIBLE else View.GONE
    }

    private fun updateGlobalFavorite(word: Word) {
        VocabData.getChapters().forEach { ch ->
            ch.words.find { it.id == word.id }?.isFavorite = word.isFavorite
        }
    }

    override fun onDestroyView() {
        tts?.stop()
        tts?.shutdown()
        super.onDestroyView()
    }
}===== ./java/com/example/spanishvocab/TestSelectFragment.kt =====
package com.example.spanishvocab

import android.app.Activity
import android.content.Intent
import android.os.Bundle
import android.view.View
import android.widget.TextView
import androidx.activity.result.contract.ActivityResultContracts
import androidx.cardview.widget.CardView
import androidx.fragment.app.Fragment
import com.example.spanishvocab.data.Level

class TestSelectFragment : Fragment(R.layout.fragment_test_select) {

    // 레벨 선택 결과 받기: intent에 "selected_level" 로 enum 이름(DELE_A1 등) 반환
    private val levelPickLauncher = registerForActivityResult(
        ActivityResultContracts.StartActivityForResult()
    ) { result ->
        if (result.resultCode == Activity.RESULT_OK) {
            val enumName = result.data?.getStringExtra("selected_level") ?: return@registerForActivityResult
            // enum 이름 → 표시명 변환 (예: DELE_A1 → "DELE A1")
            val displayName = runCatching { Level.valueOf(enumName).displayName }
                .getOrNull() ?: enumName
            startActivity(
                Intent(requireContext(), TestActivity::class.java).apply {
                    putExtra("mode", "level")
                    putExtra("level", displayName)
                }
            )
        }
    }

    // 챕터 선택 결과 받기: intent에 "selected_chapter_id" 로 챕터 id 반환
    private val chapterPickLauncher = registerForActivityResult(
        ActivityResultContracts.StartActivityForResult()
    ) { result ->
        if (result.resultCode == Activity.RESULT_OK) {
            val chapterId = result.data?.getIntExtra("selected_chapter_id", -1) ?: -1
            if (chapterId != -1) {
                startActivity(
                    Intent(requireContext(), TestActivity::class.java).apply {
                        putExtra("mode", "chapter")
                        putExtra("chapterId", chapterId)
                    }
                )
            }
        }
    }

    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {
        super.onViewCreated(view, savedInstanceState)

        // 툴바 타이틀 보정 및 레벨 선택 UI 숨김(메인 정책과 동일)
        requireActivity().findViewById<TextView>(R.id.toolbarTitle)?.text = "테스트 방식 선택"
        (requireActivity() as? MainActivity)?.showLevelSelector(false)

        // 카드: 레벨별 테스트
        view.findViewById<CardView>(R.id.cardLevel).setOnClickListener {
            val i = Intent(requireContext(), LevelSelectActivity::class.java)
            i.putExtra("forTest", true) // ★ 테스트 모드로 실행 (선택 결과만 반환)
            levelPickLauncher.launch(i)
        }

        // 카드: 챕터별 테스트
        view.findViewById<CardView>(R.id.cardChapter).setOnClickListener {
            val i = Intent(requireContext(), ChapterSelectActivity::class.java)
            i.putExtra("forTest", true) // ★ 테스트용 챕터 선택
            chapterPickLauncher.launch(i)
        }

        // 카드: 즐겨찾기 테스트
        view.findViewById<CardView>(R.id.cardFavorite).setOnClickListener {
            startActivity(
                Intent(requireContext(), TestActivity::class.java).apply {
                    putExtra("mode", "favorite")
                }
            )
        }
    }
}===== ./java/com/example/spanishvocab/TestActivity.kt =====
package com.example.spanishvocab

import android.os.Bundle
import android.speech.tts.TextToSpeech
import android.view.MotionEvent
import android.view.View
import android.widget.*
import androidx.appcompat.app.AlertDialog
import androidx.appcompat.app.AppCompatActivity
import com.example.spanishvocab.data.VocabData
import com.example.spanishvocab.data.Word
import java.util.*
import kotlin.math.min

class TestActivity : AppCompatActivity(), TextToSpeech.OnInitListener {

    private lateinit var toolbarTitle: TextView
    private lateinit var progressText: TextView
    private lateinit var questionText: TextView
    private lateinit var optionsGroup: RadioGroup
    private lateinit var option1: RadioButton
    private lateinit var option2: RadioButton
    private lateinit var option3: RadioButton
    private lateinit var option4: RadioButton
    private lateinit var checkUnsure: CheckBox
    private lateinit var submitButton: Button

    private var tts: TextToSpeech? = null

    private val sourceWords = mutableListOf<Word>()
    private val testWords = mutableListOf<Word>()

    private var currentQuestionIndex = 0
    private var correctAnswers = 0
    private var currentCorrectIndex = -1

    private data class Record(
        val word: Word,
        val isCorrect: Boolean,
        val chosenText: String,
        val correctText: String,
        val isUnsure: Boolean
    ) : java.io.Serializable

    private val records = mutableListOf<Record>()

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_test)

        setupViews()
        setupToolbarTitle()
        setupTTS()
        loadWordsByMode()
        startTest()
    }

    private fun setupViews() {
        toolbarTitle = findViewById(R.id.toolbarTitle)
        progressText = findViewById(R.id.textProgress)
        questionText = findViewById(R.id.textQuestion)
        optionsGroup = findViewById(R.id.optionsGroup)
        option1 = findViewById(R.id.option1)
        option2 = findViewById(R.id.option2)
        option3 = findViewById(R.id.option3)
        option4 = findViewById(R.id.option4)
        checkUnsure = findViewById(R.id.checkUnsure)
        submitButton = findViewById(R.id.buttonSubmit)

        // 눌림(축소-복원) 효과
        fun View.applyPressEffect() {
            isClickable = true
            isFocusable = true
            setOnTouchListener { v, e ->
                when (e.actionMasked) {
                    MotionEvent.ACTION_DOWN -> {
                        v.animate().scaleX(0.98f).scaleY(0.98f).setDuration(70).start()
                        v.alpha = 0.96f
                    }
                    MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL -> {
                        v.animate().scaleX(1f).scaleY(1f).setDuration(90).start()
                        v.alpha = 1f
                    }
                }
                false
            }
        }
        submitButton.applyPressEffect()
        option1.applyPressEffect()
        option2.applyPressEffect()
        option3.applyPressEffect()
        option4.applyPressEffect()

        submitButton.setOnClickListener { checkAnswerAndNext() }
    }

    private fun setupToolbarTitle() {
        val mode = intent.getStringExtra("mode") ?: ""
        val title = when (mode) {
            "favorite" -> "즐겨찾기 테스트"
            "level"    -> "레벨별 테스트"
            "chapter"  -> "챕터별 테스트"
            else       -> "단어 테스트"
        }
        toolbarTitle.text = title
    }

    private fun setupTTS() {
        tts = TextToSpeech(this, this)
    }

    override fun onInit(status: Int) {
        if (status == TextToSpeech.SUCCESS) {
            tts?.language = Locale("es", "ES")
        }
    }

    /** 모드에 따라 출제 풀 구성 */
    private fun loadWordsByMode() {
        val mode = intent.getStringExtra("mode") ?: ""

        when (mode) {
            "favorite" -> {
                val favs = VocabData.getFavoriteWords()
                sourceWords.clear()
                sourceWords.addAll(favs)
            }
            "level" -> {
                val levelName = intent.getStringExtra("level")
                val chapters = VocabData.getChapters().filter { c ->
                    val dn = c.level.displayName
                    dn == levelName || dn.replace("DELE ", "") == levelName
                }
                sourceWords.clear()
                chapters.forEach { sourceWords.addAll(it.words) }
            }
            "chapter" -> {
                val chapterId = intent.getIntExtra("chapterId", -1)
                val chapter = VocabData.getChapters().find { it.id == chapterId }
                sourceWords.clear()
                if (chapter != null) sourceWords.addAll(chapter.words)
            }
            else -> {
                sourceWords.clear()
                VocabData.getChapters().forEach { sourceWords.addAll(it.words) }
            }
        }

        if (sourceWords.isEmpty()) {
            Toast.makeText(this, "출제할 단어가 없습니다.", Toast.LENGTH_SHORT).show()
            finish()
            return
        }

        testWords.clear()
        val count = min(10, sourceWords.size)
        testWords.addAll(sourceWords.shuffled().take(count))
    }

    private fun startTest() {
        currentQuestionIndex = 0
        correctAnswers = 0
        records.clear()
        showQuestion()
    }

    private fun showQuestion() {
        if (currentQuestionIndex >= testWords.size) {
            showResultDialog()
            return
        }

        val word = testWords[currentQuestionIndex]
        progressText.text = "Question ${currentQuestionIndex + 1} / ${testWords.size}"
        questionText.text = "What does '${word.spanish}' mean?"

        val correct = word.meanings.firstOrNull().orEmpty()

        val allPool = VocabData.getChapters().flatMap { it.words }.distinctBy { it.id }
        val wrongs = allPool
            .filter { it.id != word.id }
            .mapNotNull { it.meanings.firstOrNull() }
            .shuffled()
            .take(3)

        val paddedWrongs = if (wrongs.size < 3) {
            wrongs + List(3 - wrongs.size) { "—" }
        } else wrongs

        val options = (listOf(correct) + paddedWrongs).take(4).shuffled()
        currentCorrectIndex = options.indexOf(correct)

        option1.text = options[0]
        option2.text = options[1]
        option3.text = options[2]
        option4.text = options[3]

        optionsGroup.clearCheck()
        checkUnsure.isChecked = false
        submitButton.text = if (currentQuestionIndex == testWords.size - 1) "Finish" else "Submit"
    }

    private fun checkAnswerAndNext() {
        val selectedId = optionsGroup.checkedRadioButtonId
        if (selectedId == -1) {
            Toast.makeText(this, "정답을 선택해주세요.", Toast.LENGTH_SHORT).show()
            return
        }

        val selectedIndex = when (selectedId) {
            R.id.option1 -> 0
            R.id.option2 -> 1
            R.id.option3 -> 2
            R.id.option4 -> 3
            else -> -1
        }

        val word = testWords[currentQuestionIndex]
        val options = listOf(
            option1.text.toString(),
            option2.text.toString(),
            option3.text.toString(),
            option4.text.toString()
        )

        val isCorrect = (selectedIndex == currentCorrectIndex)
        if (isCorrect) correctAnswers++

        records += Record(
            word = word,
            isCorrect = isCorrect,
            chosenText = options.getOrNull(selectedIndex).orEmpty(),
            correctText = options.getOrNull(currentCorrectIndex).orEmpty(),
            isUnsure = checkUnsure.isChecked
        )

        currentQuestionIndex++
        showQuestion()
    }

    private fun showResultDialog() {
        val total = testWords.size
        val score = (correctAnswers * 100f / total).toInt()

        val wrongList = records.filter { !it.isCorrect }.map { it.word }.distinctBy { it.id }
        val unsureList = records.filter { it.isUnsure }.map { it.word }.distinctBy { it.id }
        val allList = records.map { it.word }

        val msg = "Correct: $correctAnswers / $total ( $score% )\n" +
                "틀린 문항: ${wrongList.size}개, 체크: ${unsureList.size}개"

        AlertDialog.Builder(this)
            .setTitle("결과")
            .setMessage(msg)
            .setPositiveButton("전체 보기") { _, _ ->
                if (allList.isEmpty()) {
                    Toast.makeText(this, "보기 항목이 없습니다.", Toast.LENGTH_SHORT).show()
                } else {
                    // ⚠ ReviewActivity.start는 (context, title, words) 시그니처만 지원
                    ReviewActivity.start(this, "전체 복습", ArrayList(allList))
                }
            }
            .setNeutralButton("체크한 것만") { _, _ ->
                if (unsureList.isEmpty()) {
                    Toast.makeText(this, "체크한 항목이 없습니다.", Toast.LENGTH_SHORT).show()
                } else {
                    ReviewActivity.start(this, "체크 복습", ArrayList(unsureList))
                }
            }
            .setNegativeButton("틀린 것만") { _, _ ->
                if (wrongList.isEmpty()) {
                    Toast.makeText(this, "틀린 항목이 없습니다.", Toast.LENGTH_SHORT).show()
                } else {
                    ReviewActivity.start(this, "오답 복습", ArrayList(wrongList))
                }
            }
            .setOnDismissListener { finish() }
            .show()
    }

    override fun onDestroy() {
        tts?.stop()
        tts?.shutdown()
        super.onDestroy()
    }
}===== ./java/com/example/spanishvocab/ChapterSelectActivity.kt =====
package com.example.spanishvocab

import android.content.Intent
import android.os.Bundle
import android.view.LayoutInflater
import android.view.ViewGroup
import android.widget.TextView
import androidx.appcompat.app.AppCompatActivity
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import com.example.spanishvocab.data.Chapter
import com.example.spanishvocab.data.Level
import com.example.spanishvocab.data.VocabData

class ChapterSelectActivity : AppCompatActivity() {

    private var forTest: Boolean = false

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_chapter_select)

        forTest = intent.getBooleanExtra("forTest", false)

        findViewById<TextView>(R.id.toolbarTitle).text =
            if (forTest) "챕터 선택 (테스트)" else "챕터 선택"

        val selectedLevel = getSelectedLevelFromPrefs()
        val chapters: List<Chapter> = if (selectedLevel != null) {
            VocabData.getChapters().filter { it.level == selectedLevel }
        } else {
            VocabData.getChapters()
        }

        val rv = findViewById<RecyclerView>(R.id.recyclerViewChapters)
        rv.layoutManager = LinearLayoutManager(this)
        rv.adapter = ChapterPickAdapter(chapters) { chapter ->
            if (forTest) {
                setResult(RESULT_OK, Intent().putExtra("selected_chapter_id", chapter.id))
                finish()
            } else {
                // 필요 시 여기서 일반 모드 행동(예: 해당 챕터 단어 리스트 열기)
                // val i = Intent(this, WordListActivity::class.java)
                // i.putExtra("chapter", chapter)
                // startActivity(i)
            }
        }
    }

    private fun getSelectedLevelFromPrefs(): Level? {
        val name = getSharedPreferences("prefs", MODE_PRIVATE)
            .getString("selected_level", null)
        return name?.let { Level.valueOf(it) }
    }
}

class ChapterPickAdapter(
    private val items: List<Chapter>,
    private val onClick: (Chapter) -> Unit
) : RecyclerView.Adapter<ChapterPickVH>() {

    override fun onCreateViewHolder(parent: ViewGroup, viewType: Int): ChapterPickVH {
        val v = LayoutInflater.from(parent.context)
            .inflate(R.layout.item_chapter, parent, false)
        return ChapterPickVH(v)
    }

    override fun onBindViewHolder(holder: ChapterPickVH, position: Int) {
        holder.bind(items[position], onClick)
    }

    override fun getItemCount(): Int = items.size
}

class ChapterPickVH(itemView: android.view.View) : RecyclerView.ViewHolder(itemView) {
    private val title = itemView.findViewById<TextView>(R.id.textChapterTitle)
    fun bind(chapter: Chapter, onClick: (Chapter) -> Unit) {
        title.text = chapter.title
        itemView.setOnClickListener { onClick(chapter) }
    }
}